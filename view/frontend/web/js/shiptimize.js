/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 450:
/***/ (() => {

eval("\n;// CONCATENATED MODULE: ./js/shiptimize-utils.js\n/** \n * Singleton object we can use for platform independent stuff \n */\nclass ShiptimizeUtils {\n  constructor() {}\n\n  /** \n   * Inject Script into the page \n   * @param string src \n   */\n  injectExternalScript(src) {\n    let s = document.createElement(\"script\");\n    s.setAttribute(\"src\", src);\n    document.body.appendChild(s);\n  }\n\n  /** \n   * Inject a script string \n   */\n  injectScript(contents) {\n    let e = document.createElement(\"script\");\n    e.value = contents;\n    document.body.appendChild(e);\n  }\n\n  /** \n   * Removes all not numeric chars from the string \n   *\n   * @param string string - the input string \n   * @return the string without chars that are not numbers \n   */\n  removeNonNumeric(string) {\n    return string.replace(/\\D/g, '');\n  }\n\n  /** \n   * Check if the given url exists and is valid\n   * We use this to check if the carrier icon exists given \n   * a url path and the naming convention {carrier_id}.svg \n   * Make sure the correct protocol is appended to the url http != https \n   * \n   * @return true it the url exists and is valid \n   */\n  isUrlValid(url) {\n    var http = new XMLHttpRequest();\n    http.open('HEAD', url, false);\n    http.send();\n    return http.status == 200;\n  }\n\n  /** \n   * Open a new window with the provided URL \n   * @string url \n   * @return bool if the window was opened, false if popup blocker enabled \n   */\n  openNewWindow(url, options) {\n    let newWin = window.open(url, '_blank', options);\n    let blocked = !newWin || newWin.closed || typeof newWin.closed == 'undefined';\n    return !blocked;\n  }\n}\nlet utils = new ShiptimizeUtils();\n/* harmony default export */ const shiptimize_utils = (utils);\n;// CONCATENATED MODULE: ./js/shiptimize-magento.js\nclass ShiptmizeMagento {\n  constructor() {\n    this.bootstrap();\n    this.rate_carrier = {};\n    this.rate_requested = false;\n    this.pickupPoint = {};\n    this.currentMethod = null;\n  }\n\n  /**   \n   * If it's a multi step ajax checkout.. we don't try to understand  what convoluted logic the theme developers have going on, but just wait for the \n   * methods to be included \n   *\n   * Furthermore we are plugin into the footer to inject the map, but we can't guarantee it will be included in the outer body tag, so we need to do that after load. \n   * If there is a table rate present we need to ask the server if the selected method has pickup \n   */\n  bootstrap() {\n    //Not ideal, but also not horrendous wait for the element to exist \n    if (jQuery(\"input[type='radio']:checked\").length == 0) {\n      setTimeout(() => {\n        this.bootstrap();\n      }, 500);\n      return;\n    }\n\n    // jQuery(\"#maincontent\").bind(\"DOMSubtreeModified\",  () => {\n    //   this.addEvents();\n    // });\n\n    let map_wrapper = jQuery(\".shiptimize-pickup\");\n    jQuery(\"body\").append(map_wrapper);\n    this.addEvents();\n  }\n\n  /** \n   * Because it's possible for functions to modify the html structure \n   * and remove our events  \n   */\n  addEvents() {\n    this.addCheckoutButton();\n    jQuery(\"#maincontent\").on('change', \"input[type='radio']\", () => {\n      this.addCheckoutButton();\n    });\n\n    /**\n     * If the user clicks the row the method is changed \n     * but the change event is not triggered \n     */\n    jQuery(\"#maincontent\").on('click', \"tr\", () => {\n      this.addCheckoutButton();\n    });\n\n    /**\n     *  Shops may use any html structure, not necessarily a table to server \n     *  Shipping methods \n     *  The dom may be replaced on page load \n     */\n    jQuery(\"input[type='radio']\").each((idx, elem) => {\n      console.log(\"radio \", jQuery(elem).val().toLowerCase());\n      if (jQuery(elem).val().toLowerCase().indexOf('shiptimize') >= 0) {\n        jQuery(elem).parent().parent().on('click', () => {\n          console.log(\"clicked\", elem);\n          this.addCheckoutButton();\n        });\n      }\n    });\n  }\n  /** \n   * If the selected Shipping method allows the user to choose a pickup address we add a button \n   * We always refresh the address, because people can go back and change it and we have no way of knowing if that happened \n   * \n   * Layout options by order: \n   * if there is a label, insert after the label \n   * if there is a table, insert in the last td \n   * else insert after the selected radio \n   */\n  addCheckoutButton() {\n    const shippingMethod = this.getSelectedShipppingMethod();\n\n    /**\n     * we only call this function if it's a shiptimize method\n    if (this.currentMethod === shippingMethod) {\n      return;\n    }**/\n\n    this.currentMethod = shippingMethod;\n    this.pickupPoint = {};\n    if (!this.hasPickup(shippingMethod)) {\n      jQuery(\".shiptimize-choose-pickup\").remove();\n      return;\n    }\n    jQuery(\".shiptimize-choose-pickup\").remove();\n\n    /** \n     * This function is declared on our mage script\n     */\n    shiptimize_get_shipping_address();\n    let eSelectedMethod = jQuery(jQuery(\"input[type='radio']:checked\").get(0));\n    let parentRow = eSelectedMethod.parents(\"tr\");\n    let eLabel = eSelectedMethod.siblings('label');\n    let eShiptimizeButton = jQuery(\"<span class='shiptimize-choose-pickup' >\" + \"<button class='button btn btn-primary' type='button' onClick='shiptimize.getPickupLocations()'>\" + shiptmize_choose + '</button>' + \"<span class='shiptimize-pickup__description'></span>\" + \"</span>\");\n    if (eLabel.length > 0) {\n      eShiptimizeButton.insertAfter(eLabel);\n    } else if (parentRow.length > 0) {\n      let tds = parentRow.children(\"td\");\n      jQuery(tds.get(tds.length - 1)).append(eShiptimizeButton);\n    } else {\n      /** default to block layout **/\n      eShiptimizeButton.addClass('shiptimize-custom-layout');\n      eSelectedMethod.parent().parent().parent().append(eShiptimizeButton);\n    }\n  }\n\n  /**\n   * \n   */\n  hasPickup(mage_id) {\n    /** \n     * Shiptimize table rates adds sufix pickup if method provides pickup points \n     */\n    if (mage_id.match(/([\\d]+)_pickup/) != null) {\n      return true;\n    }\n    for (let x = 0; x < shiptimize_carriers.length; ++x) {\n      if (shiptimize_carriers[x].ClassName === mage_id && shiptimize_carriers[x].HasPickup) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /** \n   * @return the id of the shiptimize carrier associated with this method \n   */\n  getShiptimizeId(mage_id) {\n    var carrier_id = mage_id.match(/([\\d]+)_pickup/);\n    if (carrier_id != null) {\n      return carrier_id[1];\n    }\n    for (let x = 0; x < shiptimize_carriers.length; ++x) {\n      if (shiptimize_carriers[x].ClassName === mage_id) {\n        return typeof shiptimize_carriers[x].Id == 'object' ? shiptimize_carriers[x].Id['0'] : shiptimize_carriers[x].Id;\n      }\n    }\n    return 0;\n  }\n  getSelectedShipppingMethod() {\n    const eSelectedMethod = jQuery(\"input[type='radio']:checked\");\n    if (eSelectedMethod.length == 0) {\n      return '';\n    }\n    var method = eSelectedMethod.val();\n    /** \n     * Mage repeats the method name \n     */\n    var parts = method.split('_');\n    return parts.length > 1 && parts[0] == parts[1] ? parts[0] : method;\n  }\n\n  /** \n   * We only include this script on checkout, so it's always true\n   */\n  isCheckout() {\n    return true;\n  }\n\n  /** \n   * Returns the shipping data as an object in the same format that the api receives \n   * We get the address parts server side here \n   * Some checkouts will modify the address in ways not saved to mage \n   */\n  getShippingData() {\n    shiptimize_get_shipping_address();\n    return {\n      \"Address\": {\n        \"Lat\": \"\",\n        \"Long\": \"\",\n        'Streetname1': shiptimize_address.Streetname1,\n        'Streetname2': shiptimize_address.Streetname2,\n        'HouseNumber': '',\n        'NumberExtension': '',\n        'PostalCode': shiptimize_address.PostalCode,\n        'City': shiptimize_address.City,\n        'Country': shiptimize_address.Country,\n        \"State\": shiptimize_address.State\n      },\n      \"CarrierId\": this.getShiptimizeId(this.getSelectedShipppingMethod()) //in prestashop we can get this server side \n    };\n  }\n\n  /** \n   * @param Pickup pickup - a pickupPoint as received from the api \n   */\n  setPickupPoint(pickup) {\n    this.pickupPoint = pickup;\n    let label = pickup.Information.Name ? pickup.Information.Name : pickup.Information.Address + \" \" + pickup.Information.ZipCode;\n\n    //  Not present in all checkout configurations \n    let eShipTo = jQuery(\".ship-to\");\n    if (eShipTo.length > 0) {\n      if (jQuery(\"#shiptolabel\").length == 0) {\n        eShipTo.append(\"<div id=\\\"shiptolabel\\\"></div>\");\n      }\n      jQuery(\"#shiptolabel\").html('<p><br/>' + shiptimize_selected_pickup + \" : \" + label + '</p>');\n    }\n    let data = {\n      'PointId': pickup.PointId,\n      'Label': label,\n      'Extendedinfo': pickup.Extendedinfo\n    };\n    console.log(data);\n    jQuery.getJSON(shiptimize_ajax_save_pickup, data, resp => {\n      console.log(resp);\n    });\n  }\n}\n;// CONCATENATED MODULE: ./js/shiptimize-gmaps.js\n\nclass ShiptimizeGmaps {\n  constructor(key) {\n    this.isScriptLoaded = false;\n    this.markers = [];\n    this.map = null;\n    this.pickupPoints = [];\n    this.key = key;\n\n    /** \n     * the root url for the icons it's different for every platform  \n     * make sure to include a trailing / \n     */\n    this.icon_folder = shiptimize_icon_folder;\n    this.icon_selected = shiptimize_icon_folder + 'selected.png';\n    this.icon_default = shiptimize_icon_folder + 'default.png';\n    this.current_icon = this.icon_default;\n  }\n\n  /** \n   * Checks if we have an icon for this carrier.\n   * If yes then change the carrier icon\n   * If not then use the default icon\n   * \n   * @param int carrier_id - the carrier id \n   */\n  setCarrierIcon(carrier_id) {\n    let carrier_icon_url = this.icon_folder + '' + carrier_id + '.png';\n    this.current_icon = shiptimize_utils.isUrlValid(carrier_icon_url) ? carrier_icon_url : this.icon_default;\n  }\n\n  /** \n   * if the script has not been loaded , load it \n   */\n  grantReady() {\n    if (!this.isScriptLoaded) {\n      this.loadScript();\n    }\n  }\n  loadScript() {\n    if (typeof google == 'undefined' || typeof google.maps == 'undefined') {\n      shiptimize_utils.injectExternalScript(\"https://maps.googleapis.com/maps/api/js?key=\" + this.key + \"&callback=shiptimize.loadMap\");\n    }\n    this.isScriptLoaded = true;\n  }\n\n  /** \n   * Load the map into the element \n   * This function needs the script to be loaded \n   */\n  loadMap() {\n    console.log(\"displaying map on container with \" + jQuery(\".shiptimize-pickup__map\").width() + \" \" + jQuery(\".shiptimize-pickup__map\").height(), jQuery(\".shiptimize-pickup__map\").get(0));\n    this.map = new google.maps.Map(jQuery(\".shiptimize-pickup__map\").get(0), {\n      center: {\n        lat: -34.397,\n        lng: 150.644\n      },\n      zoom: 16,\n      mapTypeControl: false\n    });\n  }\n\n  /** \n   * center the map \n   */\n  centerMap(lat, lng) {\n    this.map.setCenter(new google.maps.LatLng(lat, lng));\n  }\n\n  /** \n   * Extract the country code from a geocode result\n   * @param geocode - a google.maps.Geocoder result \n   * @return string alpha-2 code for the country name \n   */\n  getCountryCodeFromResult(geocode) {\n    if (typeof geocode.address_components == \"undefined\") {\n      return \"\";\n    }\n    let components = geocode.address_components;\n    for (let i = 0; i < components.length; ++i) {\n      let types = components[i].types;\n      for (let j = 0; j < types.length; ++j) {\n        if (types[j] == 'country') {\n          return components[i].short_name;\n        }\n      }\n    }\n  }\n\n  /**\n   *  \n   * @param shippingData, the address parts       \n   * @param f_callback , the function to call when all mighty google returns a result \n   */\n  geocode(shippingData, f_callback) {\n    if (typeof google == 'undefined') {\n      //script not loaded yet\n      setTimeout(() => {\n        this.geocode(shippingData, f_callback);\n      }, 200);\n      return;\n    }\n    let geocoder = new google.maps.Geocoder();\n    let me = this;\n    var address = shippingData.Address.Streetname1 + \" \" + shippingData.Address.Streetname2 + \" \" + shippingData.Address.postalCode + \" \" + shippingData.Address.City + \" \" + shippingData.Address.State + \" \" + shippingData.Address.Country;\n    console.log('geocoding ' + address);\n    geocoder.geocode({\n      'address': address\n    }, function (results, status) {\n      let geocode = {\n        iso2: '',\n        lat: '',\n        lng: ''\n      };\n      if (status == 'OK') {\n        geocode = results[0];\n      } else {\n        console.log('Geocode was not successful for the following reason: ' + status);\n        f_callback(geocode);\n        return;\n      }\n      let latlng = geocode.geometry.location;\n      geocode.iso2 = me.getCountryCodeFromResult(geocode);\n      geocode.lat = latlng.lat();\n      geocode.lng = latlng.lng();\n      f_callback(geocode);\n    });\n  }\n  clearMarkers() {\n    if (this.markers.length > 0) {\n      for (let i = 0; i < this.markers.length; ++i) {\n        this.markers[i].setMap(null);\n      }\n      this.markers = [];\n    }\n  }\n\n  /** \n   * Add the markers to map \n   * @param array pickupPoints - an array of pickupPoints\n   * @param callback - a function to call when the marker is clicked \n   */\n  addMarkers(pickupPoints, callback) {\n    this.pickupPoints = pickupPoints;\n    for (let x = 0; x < pickupPoints.length; ++x) {\n      this.markers[x] = this.getMarker(pickupPoints[x]);\n      //    we need to do this because the values for lat,lng we have are rounded, so they will not match the ones returned by google\n      pickupPoints[x].marker = this.markers[x];\n      this.markers[x].addListener('click', () => {\n        if (typeof callback != 'undefined') {\n          callback(x);\n        }\n      });\n    }\n    this.fitBounds();\n  }\n\n  /** \n   * Return a marker for the gmaps \n   */\n  getMarker(pickupPoint, callback) {\n    let marker = new google.maps.Marker({\n      position: new google.maps.LatLng(pickupPoint.Lat, pickupPoint.Long),\n      map: this.map,\n      icon: {\n        url: this.current_icon\n      }\n    });\n    return marker;\n  }\n  fitBounds() {\n    var bounds = new google.maps.LatLngBounds();\n    for (let x = 0; x < this.markers.length; ++x) {\n      bounds.extend(this.markers[x].getPosition());\n    }\n    this.map.fitBounds(bounds);\n  }\n\n  /**\n   * Reset all markers  \n   * Select the marker of index idx in map \n   * @param int idx - the index to select \n   */\n  selectMarkerByIdx(idx) {\n    for (let i = 0; i < this.markers.length; ++i) {\n      this.markers[i].setIcon(idx == i ? this.icon_selected : this.current_icon);\n    }\n  }\n}\n;// CONCATENATED MODULE: ./js/shiptimize-open-map.js\n\nclass ShiptimizeOpenMap {\n  constructor() {\n    this.isScriptLoaded = false;\n    this.markers = [];\n    this.map = null;\n\n    /** \n     * the root url for the icons it's different for every platform  \n     * make sure to include a trailing / \n     */\n    this.icon_folder = shiptimize_icon_folder;\n  }\n\n  /** \n   *\n   * @param string imageUrl - full url to the icon \n   * @return L.icon object \n   */\n  createIcon(imageUrl) {\n    return L.icon({\n      iconUrl: imageUrl,\n      iconSize: [50, 50],\n      // size of the icon \n      iconAnchor: [25, 25],\n      // point of the icon which will correspond to marker's location \n      popupAnchor: [-25, -50] // point from which the popup should open relative to the iconAnchor\n    });\n  }\n\n  /** \n   * @param decimal lat \n   * @param decimal lng \n   */\n  centerMap(lat, lng) {\n    this.map.invalidateSize();\n    let latlng = L.latLng(lat, lng);\n  }\n\n  /** \n   * if the script has not been loaded , load it. \n   * We use this function because we only want to load the script when the user clicks the button \n   */\n  grantReady() {\n    if (!this.isScriptLoaded) {\n      this.loadScript();\n    }\n  }\n\n  /**\n   *  \n   * @param shippingData, the address parts       \n   * @param f_callback , the function to call when all mighty google returns a result \n   */\n  geocode(shippingData, f_callback) {\n    console.log(shippingData);\n    this.grantReady();\n    jQuery.getJSON(\"https://nominatim.openstreetmap.org/search?format=json&addressdetails=1\" + \"&city=\" + shippingData.Address.City + \"&country=\" + shippingData.Address.Country, {}, response => {\n      let geocode = {\n        'iso2': '',\n        'lat': '',\n        'lng': ''\n      };\n      if (response.length > 0) {\n        let location = response[0];\n        geocode.iso2 = location.address.country_code;\n        geocode.lat = location.lat;\n        geocode.lng = location.lon;\n      }\n      f_callback(geocode);\n      console.log(response);\n    });\n  }\n  loadScript() {\n    if (typeof L == 'undefined') {\n      shiptimize_utils.injectExternalScript(SHIPTIMIZE_LEAFLET_URL);\n    }\n    this.isScriptLoaded = true;\n    this.loadMap();\n    return;\n  }\n\n  /** \n   * Leaflet does not receive a callback so we wait here for the script to be loaded \n   */\n  loadMap() {\n    if (typeof L == 'undefined') {\n      setTimeout(() => {\n        this.loadMap();\n      }, 1500);\n      console.log(\"Map not loaded, settimeout \");\n      return;\n    }\n    this.icon_selected = this.createIcon(shiptimize_icon_folder + 'selected.png');\n    this.icon_default = this.createIcon(shiptimize_icon_folder + 'default.png');\n    this.current_icon = this.icon_default;\n    this.map = new L.map(jQuery(\".shiptimize-pickup__map\").get(0), {\n      \"zoom\": 16,\n      \"center\": [51.505, -0.09]\n    });\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      \"attribution\": '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(this.map);\n  }\n  clearMarkers() {\n    if (this.markers.length > 0) {\n      for (let i = 0; i < this.markers.length; ++i) {\n        this.map.removeLayer(this.markers[i]);\n      }\n    }\n    this.markers = [];\n  }\n\n  /** \n   * Add the markers to map \n   * @param array pickupPoints - an array of pickupPoints\n   */\n  addMarkers(pickupPoints, callback) {\n    this.pickupPoints = pickupPoints;\n    for (let x = 0; x < pickupPoints.length; ++x) {\n      this.markers[x] = this.getMarker(pickupPoints[x]);\n      //    we need to do this because the values for lat,lng we have are rounded, so they will not match the ones returned by google\n      this.pickupPoints[x].marker = this.markers[x];\n      this.markers[x].on('click', () => {\n        if (typeof callback == 'function') {\n          callback(x);\n        }\n      });\n    }\n    this.fitBounds();\n  }\n  resetMarker(marker) {\n    marker.setIcon(this.icon_default);\n  }\n  selectMarker(marker) {\n    marker.setIcon(this.icon_selected);\n  }\n\n  /** \n   * Adjust the zoom in the map to display all the markers \n   * There's a fit bounds that receives 2 corners, but calculating them is up to us. \n   * corners: top left, bottom right     \n   * then we center the map at the center of the square  \n   */\n  fitBounds() {\n    let bottomLeft = [this.pickupPoints[0].Lat, this.pickupPoints[0].Long];\n    let topRight = [this.pickupPoints[0].Lat, this.pickupPoints[0].Long];\n    for (let i = 0; i < this.pickupPoints.length; ++i) {\n      let lat = this.pickupPoints[i].Lat;\n      let lng = this.pickupPoints[i].Long;\n      if (lat < bottomLeft[0]) {\n        bottomLeft[0] = lat;\n      }\n      if (lat > topRight[0]) {\n        topRight[0] = lat;\n      }\n      if (lng > topRight[1]) {\n        topRight[1] = lng;\n      }\n      if (lng < bottomLeft[1]) {\n        bottomLeft[1] = lng;\n      }\n    }\n    let centerX = bottomLeft[0] + (topRight[0] - bottomLeft[0]) / 2;\n    let centerY = bottomLeft[1] + (topRight[1] - bottomLeft[1]) / 2;\n    this.map.panTo([centerX, centerY]);\n    this.map.fitBounds([bottomLeft, topRight]);\n  }\n\n  /** \n   * Return a marker for the openLayers \n   * IconAnchor: The coordinates of the \"tip\" of the icon (relative to its top left corner). \n   * The icon will be aligned so that this point is at the marker's geographical location. \n   * Centered by default if size is specified, also can be set in CSS with negative margins.\n   */\n  getMarker(pickupPoint) {\n    let marker = L.marker([pickupPoint.Lat, pickupPoint.Long], {\n      \"icon\": this.current_icon,\n      \"title\": pickupPoint.Information.Name + \"\\n\" + pickupPoint.Information.Address\n    });\n    marker.addTo(this.map);\n    return marker;\n  }\n\n  /** \n   * Checks if we have an icon for this carrier.\n   * If yes then change the carrier icon\n   * If not then use the default icon\n   * \n   * @param int carrier_id - the carrier id \n   */\n  setCarrierIcon(carrier_id) {\n    if (typeof L == 'undefined') {\n      setTimeout(() => {\n        this.setCarrierIcon(carrier_id);\n      }, 200);\n      return;\n    }\n    let carrier_icon_url = this.icon_folder + '' + carrier_id + '.png';\n    this.current_icon = shiptimize_utils.isUrlValid(carrier_icon_url) ? this.createIcon(carrier_icon_url) : this.icon_default;\n  }\n\n  /**\n   * Reset all markers  \n   * Select the marker of index idx in map \n   * @param int idx - the index to select \n   */\n  selectMarkerByIdx(idx) {\n    for (let i = 0; i < this.markers.length; ++i) {\n      this.markers[i].setIcon(idx == i ? this.icon_selected : this.current_icon);\n    }\n  }\n}\n;// CONCATENATED MODULE: ./shiptmize.js\n\n\n\n\n\n\n\n/** \n * Class Shiptimize depends on jQuery. \n * Check if we are meant to append a map \n * \n * Platform dependent functions marked with   * @platformDependent \n */\nclass Shiptimize {\n  constructor(ajax_url) {\n    this.markers = []; //pickup {lat, lng} \n    this.isMapLoaded = false;\n    this.gmaps_key = shiptimize_maps_key;\n    this.openMapMarkerIcons = {};\n    this.ajax_url = ajax_url; // platform dependent \n\n    this.platform = new ShiptmizeMagento(this.ajax_url);\n    this.map = shiptimize_maps_key ? new ShiptimizeGmaps(shiptimize_maps_key) : new ShiptimizeOpenMap();\n    this.platform.isCheckout();\n  }\n\n  /** \n   * Show the map to the user \n   */\n  showMap() {\n    this.map.grantReady();\n    this.userScroll = jQuery('html,body').scrollTop();\n    jQuery('html,body').scrollTop(0);\n    jQuery(\".shiptimize-pickup\").addClass(\"active\");\n    this.platform.pickupPoint = {};\n  }\n\n  /** \n   * Hide the map   \n   */\n  hideMap() {\n    jQuery(\".shiptimize-pickup\").removeClass(\"active\");\n    jQuery(\".shiptimize-pickup__error\").hide();\n    jQuery('html,body').scrollTop(this.userScroll);\n  }\n  clearMarkers() {\n    this.map.clearMarkers();\n  }\n\n  /** \n   * Generate the inputs for the user to append extra info if necessary \n   * The id of these fields is in the format shiptimize_extra_{PointId}_{FieldId}\n   */\n  getExtendedInfoHtml(pickupPoint) {\n    if (!pickupPoint.ExtendedInfo || typeof pickupPoint.ExtendedInfo.length == 'undefined') {\n      return \"\";\n    }\n    let html = '';\n    for (let x = 0; pickupPoint.ExtendedInfo && x < pickupPoint.ExtendedInfo.length; ++x) {\n      let extraInfo = pickupPoint.ExtendedInfo[x];\n      html += '<div class=\"shiptimize-pickup__extended\">' + '<label class=\"shiptimize-pickup__extended_label \">' + extraInfo.Tekst + '</label>' + '<input type=\"text\" name=\"shiptimize_pickup_extended_value\" value=\"\" id=\"shiptimize_extra_' + pickupPoint.PointId + '_' + extraInfo.FieldId + '\"/> ' + '<input type=\"hidden\" name=\"shiptimize_pickup_extended_id\" id=\"shiptimize_pickup\" value=\"' + extraInfo.FieldId + '\"/> ' + '</div>';\n    }\n    return html;\n  }\n\n  /**\n   * Reset all markers  \n   * Select the marker of index idx in map \n   */\n  selectPointFromListInMap(idx) {\n    jQuery(\"input[name='shiptimize__point']\").prop('checked', false);\n    this.map.selectMarkerByIdx(idx);\n    jQuery(jQuery(\"input[name='shiptimize__point']\").get(idx)).prop('checked', true);\n  }\n\n  /** \n   * When the user clicks the validate button \n   */\n  selectFromList() {\n    let idx = jQuery(\"input[name='shiptimize__point']:checked\").val();\n    if (!this.pickupPoints || typeof this.pickupPoints[idx] == 'undefined') {\n      console.log(\"Invalid pickup. Did the user click select before selecting a point?\");\n      return;\n    }\n    let pickup = this.pickupPoints[idx];\n    let extra = '';\n    for (let i = 0; pickup.ExtendedInfo && i < pickup.ExtendedInfo.length; ++i) {\n      extra += \"<br/>\" + pickup.ExtendedInfo[i].Tekst + ': ' + jQuery(\"#shiptimize_extra_\" + pickup.PointId + \"_\" + pickup.ExtendedInfo[i].FieldId).val();\n    }\n    jQuery(\".shiptimize-pickup__description\").html(shiptimize_selected_pickup + \" : \" + pickup.Information.Name + \" \" + pickup.Information.Address + \" \" + extra);\n    this.platform.setPickupPoint(pickup);\n    this.hideMap();\n  }\n\n  /** \n   *  Returns the distance between 2 (lat,lng) points in kms \n   */\n  getDistance(latlng, latlng2) {\n    var R = 6371e3; // metres\n    var φ1 = latlng.lat().toRadians();\n    var φ2 = latlng2.lng().toRadians();\n    var Δφ = (latln2.lat() - latlng.lng()).toRadians();\n    var Δλ = (latln2.lng() - latlng.lon()).toRadians();\n    var a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = Math.floor(R * c / 1000);\n  }\n\n  /** \n   * Show the map and query the server for pickup locations near the shipping address provided by the client\n   * center the map on the first point \n   * remove old markers \n   * add the new markers  \n   */\n  getPickupLocations() {\n    this.showMap();\n    let data = this.platform.getShippingData();\n    data.action = 'shiptimize_pickup_locations';\n    this.map.setCarrierIcon(data.CarrierId);\n    this.map.geocode(data, geocode => {\n      this.getPickupLocationsFromGeocodedAddr(geocode, data);\n    });\n  }\n  getPickupLocationsFromGeocodedAddr(geocode, data) {\n    this.resetUI();\n    data.Address.Country = geocode.iso2;\n    data.Address.Long = geocode.lng;\n    data.Address.Lat = geocode.lat;\n    console.log(data);\n    console.log(geocode);\n    jQuery.getJSON(this.ajax_url, data, pickupPoints => {\n      if (pickupPoints.length == 0) {\n        console.log(\"no pickup points found for this address \");\n        return;\n      }\n      console.log(pickupPoints);\n      if (pickupPoints.Error.Id == 0 && pickupPoints.Point.length > 0) {\n        jQuery(\".shiptimize-pickup__options,.shiptimize-pickup__map\").show();\n        this.setPickupLocations(pickupPoints.Point);\n      } else {\n        console.log(\"The api returned an error \", pickupPoints.Error); //pickupPoints.Error.Info || \n        this.pickupError(shiptimize_no_points_found);\n      }\n    });\n  }\n  resetUI() {\n    jQuery(\".shiptimize-pickup__error\").hide();\n    this.map.clearMarkers();\n  }\n\n  /** \n   * @param string info - the message to display \n   */\n  pickupError(info) {\n    this.pickupPoints = [];\n    let eError = jQuery(\".shiptimize-pickup__error\");\n    eError.html(info);\n    eError.show();\n    jQuery(\".shiptimize-pickup__options,.shiptimize-pickup__map\").hide();\n  }\n\n  /** \n   * Append the pickup Locations to the map\n   * @param array pickupPoints - an array of available pickup points \n   */\n  setPickupLocations(pickupPoints) {\n    jQuery(\".shiptimize-pickup__error\").hide();\n    this.pickupPoints = pickupPoints;\n    this.map.clearMarkers();\n    this.map.centerMap(this.pickupPoints[0].Lat, this.pickupPoints[1].Long);\n    this.map.addMarkers(pickupPoints, idx => {\n      this.selectPointFromListInMap(idx);\n    });\n    this.setOptionsForAddress(pickupPoints);\n  }\n\n  /** \n   * @param pickupPoints[] - [] of pickup points returned by the api \n   */\n  setOptionsForAddress(pickupPoints) {\n    let html = '';\n    for (let i = 0; i < pickupPoints.length; ++i) {\n      html += '<div class=\"shiptimize-pickup__point\">' + '<input type=\"radio\" value=\"' + i + '\" name=\"shiptimize__point\"  onclick=\"shiptimize.selectPointFromListInMap(' + i + ')\"/>' + '<span class=\"shiptimize-pickup__point_description\" onclick=\"shiptimize.selectPointFromListInMap(' + i + ')\">' + '<span>' + (pickupPoints[i].Information.Name ? pickupPoints[i].Information.Name + '<br/>' : '') + pickupPoints[i].Information.Address + '</span>' + this.getExtendedInfoHtml(pickupPoints[i]) + '</span>' + '</div>';\n    }\n    console.log(html);\n    jQuery(\".shiptimize-pickup__other\").html(html);\n  }\n  loadMap() {\n    this.map.loadMap();\n  }\n}\nif (typeof jQuery != 'undefined') {\n  jQuery(function () {\n    window.shiptimize = new Shiptimize(shiptimize_ajax_pickup_points);\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VCxRQUFRO0lBQ2hCO0lBQ0E5RixPQUFPLENBQUNDLEdBQUcsQ0FBQ21ELElBQUksQ0FBQztJQUVqQi9ELE1BQU0sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDK0QsSUFBSSxDQUFDQSxJQUFJLENBQUM7RUFDbEQ7RUFHQTBCLE9BQU9BLENBQUEsRUFBRztJQUNOLElBQUksQ0FBQ2IsR0FBRyxDQUFDYSxPQUFPLENBQUMsQ0FBQztFQUN0QjtBQUNKO0FBRUEsSUFBRyxPQUFPekYsTUFBTyxJQUFJLFdBQVcsRUFBQztFQUM3QkEsTUFBTSxDQUFDLFlBQVc7SUFDZFYsTUFBTSxDQUFDdU8sVUFBVSxHQUFHLElBQUl0RCxVQUFVLENBQUN1RCw2QkFBNkIsQ0FBQztFQUNyRSxDQUFDLENBQUM7QUFDTiIsInNvdXJjZXMiOlsid2VicGFjazovL3NoaXB0aW1pemUvLi9qcy9zaGlwdGltaXplLXV0aWxzLmpzPzAwZDQiLCJ3ZWJwYWNrOi8vc2hpcHRpbWl6ZS8uL2pzL3NoaXB0aW1pemUtbWFnZW50by5qcz9jMGNmIiwid2VicGFjazovL3NoaXB0aW1pemUvLi9qcy9zaGlwdGltaXplLWdtYXBzLmpzPzBiZjEiLCJ3ZWJwYWNrOi8vc2hpcHRpbWl6ZS8uL2pzL3NoaXB0aW1pemUtb3Blbi1tYXAuanM/ODljMSIsIndlYnBhY2s6Ly9zaGlwdGltaXplLy4vc2hpcHRtaXplLmpzPzY5YzciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqIFxuICogU2luZ2xldG9uIG9iamVjdCB3ZSBjYW4gdXNlIGZvciBwbGF0Zm9ybSBpbmRlcGVuZGVudCBzdHVmZiBcbiAqL1xuY2xhc3MgU2hpcHRpbWl6ZVV0aWxzIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuXG5cbiAgICAvKiogXG4gICAgICogSW5qZWN0IFNjcmlwdCBpbnRvIHRoZSBwYWdlIFxuICAgICAqIEBwYXJhbSBzdHJpbmcgc3JjIFxuICAgICAqL1xuICAgIGluamVjdEV4dGVybmFsU2NyaXB0KHNyYykge1xuICAgICAgICBsZXQgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgIHMuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNyYyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7XG4gICAgfVxuXG5cbiAgICAvKiogXG4gICAgICogSW5qZWN0IGEgc2NyaXB0IHN0cmluZyBcbiAgICAgKi9cbiAgICBpbmplY3RTY3JpcHQoY29udGVudHMpIHtcbiAgICAgICAgbGV0IGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICBlLnZhbHVlID0gY29udGVudHM7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSk7XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIFJlbW92ZXMgYWxsIG5vdCBudW1lcmljIGNoYXJzIGZyb20gdGhlIHN0cmluZyBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdHJpbmcgc3RyaW5nIC0gdGhlIGlucHV0IHN0cmluZyBcbiAgICAgKiBAcmV0dXJuIHRoZSBzdHJpbmcgd2l0aG91dCBjaGFycyB0aGF0IGFyZSBub3QgbnVtYmVycyBcbiAgICAgKi9cbiAgICByZW1vdmVOb25OdW1lcmljKHN0cmluZykge1xuICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcRC9nLCAnJyk7XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIENoZWNrIGlmIHRoZSBnaXZlbiB1cmwgZXhpc3RzIGFuZCBpcyB2YWxpZFxuICAgICAqIFdlIHVzZSB0aGlzIHRvIGNoZWNrIGlmIHRoZSBjYXJyaWVyIGljb24gZXhpc3RzIGdpdmVuIFxuICAgICAqIGEgdXJsIHBhdGggYW5kIHRoZSBuYW1pbmcgY29udmVudGlvbiB7Y2Fycmllcl9pZH0uc3ZnIFxuICAgICAqIE1ha2Ugc3VyZSB0aGUgY29ycmVjdCBwcm90b2NvbCBpcyBhcHBlbmRlZCB0byB0aGUgdXJsIGh0dHAgIT0gaHR0cHMgXG4gICAgICogXG4gICAgICogQHJldHVybiB0cnVlIGl0IHRoZSB1cmwgZXhpc3RzIGFuZCBpcyB2YWxpZCBcbiAgICAgKi8gXG4gICAgaXNVcmxWYWxpZCh1cmwpIHtcbiAgICAgICAgdmFyIGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgaHR0cC5vcGVuKCdIRUFEJywgdXJsLCBmYWxzZSk7XG4gICAgICAgIGh0dHAuc2VuZCgpO1xuICAgICAgICByZXR1cm4gaHR0cC5zdGF0dXMgPT0gMjAwO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBPcGVuIGEgbmV3IHdpbmRvdyB3aXRoIHRoZSBwcm92aWRlZCBVUkwgXG4gICAgICogQHN0cmluZyB1cmwgXG4gICAgICogQHJldHVybiBib29sIGlmIHRoZSB3aW5kb3cgd2FzIG9wZW5lZCwgZmFsc2UgaWYgcG9wdXAgYmxvY2tlciBlbmFibGVkIFxuICAgICAqLyAgXG4gICAgb3Blbk5ld1dpbmRvdyh1cmwsIG9wdGlvbnMpe1xuICAgICAgICBsZXQgbmV3V2luID0gd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJywgb3B0aW9ucyk7IFxuICAgICAgICBsZXQgYmxvY2tlZCA9ICFuZXdXaW4gfHwgbmV3V2luLmNsb3NlZCB8fCB0eXBlb2YgbmV3V2luLmNsb3NlZD09J3VuZGVmaW5lZCc7IFxuXG4gICAgICAgIHJldHVybiAhYmxvY2tlZDsgXG4gICAgfVxufVxuXG5cbmxldCB1dGlscyA9IG5ldyBTaGlwdGltaXplVXRpbHMoKTtcbmV4cG9ydCBkZWZhdWx0IHV0aWxzOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoaXB0bWl6ZU1hZ2VudG8ge1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYm9vdHN0cmFwKCk7XG4gICAgdGhpcy5yYXRlX2NhcnJpZXIgPSB7fTtcbiAgICB0aGlzLnJhdGVfcmVxdWVzdGVkID0gZmFsc2U7XG4gICAgdGhpcy5waWNrdXBQb2ludCA9IHt9O1xuICAgIHRoaXMuY3VycmVudE1ldGhvZCA9IG51bGw7XG4gIH1cblxuXG4gIC8qKiAgIFxuICAgKiBJZiBpdCdzIGEgbXVsdGkgc3RlcCBhamF4IGNoZWNrb3V0Li4gd2UgZG9uJ3QgdHJ5IHRvIHVuZGVyc3RhbmQgIHdoYXQgY29udm9sdXRlZCBsb2dpYyB0aGUgdGhlbWUgZGV2ZWxvcGVycyBoYXZlIGdvaW5nIG9uLCBidXQganVzdCB3YWl0IGZvciB0aGUgXG4gICAqIG1ldGhvZHMgdG8gYmUgaW5jbHVkZWQgXG4gICAqXG4gICAqIEZ1cnRoZXJtb3JlIHdlIGFyZSBwbHVnaW4gaW50byB0aGUgZm9vdGVyIHRvIGluamVjdCB0aGUgbWFwLCBidXQgd2UgY2FuJ3QgZ3VhcmFudGVlIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIG91dGVyIGJvZHkgdGFnLCBzbyB3ZSBuZWVkIHRvIGRvIHRoYXQgYWZ0ZXIgbG9hZC4gXG4gICAqIElmIHRoZXJlIGlzIGEgdGFibGUgcmF0ZSBwcmVzZW50IHdlIG5lZWQgdG8gYXNrIHRoZSBzZXJ2ZXIgaWYgdGhlIHNlbGVjdGVkIG1ldGhvZCBoYXMgcGlja3VwIFxuICAgKi9cbiAgYm9vdHN0cmFwKCkge1xuICAgIC8vTm90IGlkZWFsLCBidXQgYWxzbyBub3QgaG9ycmVuZG91cyB3YWl0IGZvciB0aGUgZWxlbWVudCB0byBleGlzdCBcbiAgICBpZiAoalF1ZXJ5KFwiaW5wdXRbdHlwZT0ncmFkaW8nXTpjaGVja2VkXCIpLmxlbmd0aCA9PSAwKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5ib290c3RyYXAoKTtcbiAgICAgIH0sIDUwMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8galF1ZXJ5KFwiI21haW5jb250ZW50XCIpLmJpbmQoXCJET01TdWJ0cmVlTW9kaWZpZWRcIiwgICgpID0+IHtcbiAgICAvLyAgIHRoaXMuYWRkRXZlbnRzKCk7XG4gICAgLy8gfSk7XG4gICAgXG5cbiAgICBsZXQgbWFwX3dyYXBwZXIgPSBqUXVlcnkoXCIuc2hpcHRpbWl6ZS1waWNrdXBcIik7XG4gICAgalF1ZXJ5KFwiYm9keVwiKVxuICAgICAgLmFwcGVuZChtYXBfd3JhcHBlcik7XG5cbiAgICB0aGlzLmFkZEV2ZW50cygpO1xuICB9XG5cbiAgLyoqIFxuICAgKiBCZWNhdXNlIGl0J3MgcG9zc2libGUgZm9yIGZ1bmN0aW9ucyB0byBtb2RpZnkgdGhlIGh0bWwgc3RydWN0dXJlIFxuICAgKiBhbmQgcmVtb3ZlIG91ciBldmVudHMgIFxuICAgKi8gXG4gIGFkZEV2ZW50cygpIHtcbiAgICB0aGlzLmFkZENoZWNrb3V0QnV0dG9uKCk7XG5cbiAgICBqUXVlcnkoXCIjbWFpbmNvbnRlbnRcIilcbiAgICAgIC5vbignY2hhbmdlJywgXCJpbnB1dFt0eXBlPSdyYWRpbyddXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5hZGRDaGVja291dEJ1dHRvbigpO1xuICAgICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgdXNlciBjbGlja3MgdGhlIHJvdyB0aGUgbWV0aG9kIGlzIGNoYW5nZWQgXG4gICAgICogYnV0IHRoZSBjaGFuZ2UgZXZlbnQgaXMgbm90IHRyaWdnZXJlZCBcbiAgICAgKi9cbiAgICBqUXVlcnkoXCIjbWFpbmNvbnRlbnRcIilcbiAgICAgIC5vbignY2xpY2snLCBcInRyXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5hZGRDaGVja291dEJ1dHRvbigpO1xuICAgICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiAgU2hvcHMgbWF5IHVzZSBhbnkgaHRtbCBzdHJ1Y3R1cmUsIG5vdCBuZWNlc3NhcmlseSBhIHRhYmxlIHRvIHNlcnZlciBcbiAgICAgKiAgU2hpcHBpbmcgbWV0aG9kcyBcbiAgICAgKiAgVGhlIGRvbSBtYXkgYmUgcmVwbGFjZWQgb24gcGFnZSBsb2FkIFxuICAgICAqL1xuICAgICBqUXVlcnkoXCJpbnB1dFt0eXBlPSdyYWRpbyddXCIpLmVhY2goIChpZHgsIGVsZW0pID0+ICB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJyYWRpbyBcIiAsIGpRdWVyeShlbGVtKS52YWwoKS50b0xvd2VyQ2FzZSgpKTsgXG4gICAgICAgICAgaWYoalF1ZXJ5KGVsZW0pLnZhbCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignc2hpcHRpbWl6ZScpID49MCkgeyBcbiAgICAgICAgICAgICAgalF1ZXJ5KGVsZW0pLnBhcmVudCgpLnBhcmVudCgpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsaWNrZWRcIiwgZWxlbSApO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2hlY2tvdXRCdXR0b24oKTtcbiAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9ICBcbiAgICAgIH0pO1xuICB9XG4gIC8qKiBcbiAgICogSWYgdGhlIHNlbGVjdGVkIFNoaXBwaW5nIG1ldGhvZCBhbGxvd3MgdGhlIHVzZXIgdG8gY2hvb3NlIGEgcGlja3VwIGFkZHJlc3Mgd2UgYWRkIGEgYnV0dG9uIFxuICAgKiBXZSBhbHdheXMgcmVmcmVzaCB0aGUgYWRkcmVzcywgYmVjYXVzZSBwZW9wbGUgY2FuIGdvIGJhY2sgYW5kIGNoYW5nZSBpdCBhbmQgd2UgaGF2ZSBubyB3YXkgb2Yga25vd2luZyBpZiB0aGF0IGhhcHBlbmVkIFxuICAgKiBcbiAgICogTGF5b3V0IG9wdGlvbnMgYnkgb3JkZXI6IFxuICAgKiBpZiB0aGVyZSBpcyBhIGxhYmVsLCBpbnNlcnQgYWZ0ZXIgdGhlIGxhYmVsIFxuICAgKiBpZiB0aGVyZSBpcyBhIHRhYmxlLCBpbnNlcnQgaW4gdGhlIGxhc3QgdGQgXG4gICAqIGVsc2UgaW5zZXJ0IGFmdGVyIHRoZSBzZWxlY3RlZCByYWRpbyBcbiAgICovXG4gIGFkZENoZWNrb3V0QnV0dG9uKCkge1xuXG4gICAgY29uc3Qgc2hpcHBpbmdNZXRob2QgPSB0aGlzLmdldFNlbGVjdGVkU2hpcHBwaW5nTWV0aG9kKCk7XG5cbiAgICAvKipcbiAgICAgKiB3ZSBvbmx5IGNhbGwgdGhpcyBmdW5jdGlvbiBpZiBpdCdzIGEgc2hpcHRpbWl6ZSBtZXRob2RcbiAgICBpZiAodGhpcy5jdXJyZW50TWV0aG9kID09PSBzaGlwcGluZ01ldGhvZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0qKi9cblxuICAgIHRoaXMuY3VycmVudE1ldGhvZCA9IHNoaXBwaW5nTWV0aG9kO1xuICAgIHRoaXMucGlja3VwUG9pbnQgPSB7fTtcbiAgICBcbiAgICBpZiAoIXRoaXMuaGFzUGlja3VwKHNoaXBwaW5nTWV0aG9kKSkge1xuICAgICAgalF1ZXJ5KFwiLnNoaXB0aW1pemUtY2hvb3NlLXBpY2t1cFwiKVxuICAgICAgICAucmVtb3ZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgalF1ZXJ5KFwiLnNoaXB0aW1pemUtY2hvb3NlLXBpY2t1cFwiKVxuICAgICAgLnJlbW92ZSgpO1xuXG4gICAgLyoqIFxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgZGVjbGFyZWQgb24gb3VyIG1hZ2Ugc2NyaXB0XG4gICAgICovXG4gICAgc2hpcHRpbWl6ZV9nZXRfc2hpcHBpbmdfYWRkcmVzcygpO1xuXG4gICAgbGV0IGVTZWxlY3RlZE1ldGhvZCA9IGpRdWVyeShqUXVlcnkoXCJpbnB1dFt0eXBlPSdyYWRpbyddOmNoZWNrZWRcIilcbiAgICAgIC5nZXQoMCkpO1xuICAgIGxldCBwYXJlbnRSb3cgPSBlU2VsZWN0ZWRNZXRob2QucGFyZW50cyhcInRyXCIpO1xuXG4gICAgbGV0IGVMYWJlbCA9IGVTZWxlY3RlZE1ldGhvZC5zaWJsaW5ncygnbGFiZWwnKTtcbiAgICBcbiAgICBsZXQgZVNoaXB0aW1pemVCdXR0b24gPSBqUXVlcnkoXCI8c3BhbiBjbGFzcz0nc2hpcHRpbWl6ZS1jaG9vc2UtcGlja3VwJyA+XCIgK1xuICAgICAgXCI8YnV0dG9uIGNsYXNzPSdidXR0b24gYnRuIGJ0bi1wcmltYXJ5JyB0eXBlPSdidXR0b24nIG9uQ2xpY2s9J3NoaXB0aW1pemUuZ2V0UGlja3VwTG9jYXRpb25zKCknPlwiICsgc2hpcHRtaXplX2Nob29zZSArICc8L2J1dHRvbj4nICtcbiAgICAgIFwiPHNwYW4gY2xhc3M9J3NoaXB0aW1pemUtcGlja3VwX19kZXNjcmlwdGlvbic+PC9zcGFuPlwiICtcbiAgICAgIFwiPC9zcGFuPlwiKTtcblxuICAgIGlmIChlTGFiZWwubGVuZ3RoID4gMCkge1xuICAgICAgZVNoaXB0aW1pemVCdXR0b24uaW5zZXJ0QWZ0ZXIoZUxhYmVsKTtcbiAgICB9IGVsc2UgaWYgKHBhcmVudFJvdy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgdGRzID0gcGFyZW50Um93LmNoaWxkcmVuKFwidGRcIik7XG4gICAgICBqUXVlcnkodGRzLmdldCh0ZHMubGVuZ3RoIC0gMSkpXG4gICAgICAgIC5hcHBlbmQoZVNoaXB0aW1pemVCdXR0b24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKiogZGVmYXVsdCB0byBibG9jayBsYXlvdXQgKiovIFxuICAgICAgZVNoaXB0aW1pemVCdXR0b24uYWRkQ2xhc3MoJ3NoaXB0aW1pemUtY3VzdG9tLWxheW91dCcpOyBcbiAgICAgIGVTZWxlY3RlZE1ldGhvZC5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5hcHBlbmQoZVNoaXB0aW1pemVCdXR0b24pO1xuICAgIH1cblxuICB9XG5cbiAgLyoqXG4gICAqIFxuICAgKi9cbiAgaGFzUGlja3VwKG1hZ2VfaWQpIHtcbiAgICAvKiogXG4gICAgICogU2hpcHRpbWl6ZSB0YWJsZSByYXRlcyBhZGRzIHN1Zml4IHBpY2t1cCBpZiBtZXRob2QgcHJvdmlkZXMgcGlja3VwIHBvaW50cyBcbiAgICAgKi9cbiAgICBpZiAobWFnZV9pZC5tYXRjaCgvKFtcXGRdKylfcGlja3VwLykgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBzaGlwdGltaXplX2NhcnJpZXJzLmxlbmd0aDsgKyt4KSB7XG4gICAgICBpZiAoc2hpcHRpbWl6ZV9jYXJyaWVyc1t4XS5DbGFzc05hbWUgPT09IG1hZ2VfaWQgJiYgc2hpcHRpbWl6ZV9jYXJyaWVyc1t4XS5IYXNQaWNrdXApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqIFxuICAgKiBAcmV0dXJuIHRoZSBpZCBvZiB0aGUgc2hpcHRpbWl6ZSBjYXJyaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1ldGhvZCBcbiAgICovXG4gIGdldFNoaXB0aW1pemVJZChtYWdlX2lkKSB7XG4gICAgdmFyIGNhcnJpZXJfaWQgPSBtYWdlX2lkLm1hdGNoKC8oW1xcZF0rKV9waWNrdXAvKTtcbiAgICBpZiAoY2Fycmllcl9pZCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gY2Fycmllcl9pZFsxXTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHNoaXB0aW1pemVfY2FycmllcnMubGVuZ3RoOyArK3gpIHtcbiAgICAgIGlmIChzaGlwdGltaXplX2NhcnJpZXJzW3hdLkNsYXNzTmFtZSA9PT0gbWFnZV9pZCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIChzaGlwdGltaXplX2NhcnJpZXJzW3hdLklkKSA9PSAnb2JqZWN0JyA/IHNoaXB0aW1pemVfY2FycmllcnNbeF0uSWRbJzAnXSA6IHNoaXB0aW1pemVfY2FycmllcnNbeF0uSWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBnZXRTZWxlY3RlZFNoaXBwcGluZ01ldGhvZCgpIHtcbiAgICBjb25zdCBlU2VsZWN0ZWRNZXRob2QgPSBqUXVlcnkoXCJpbnB1dFt0eXBlPSdyYWRpbyddOmNoZWNrZWRcIik7XG5cbiAgICBpZiAoZVNlbGVjdGVkTWV0aG9kLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgdmFyIG1ldGhvZCA9IGVTZWxlY3RlZE1ldGhvZC52YWwoKTtcbiAgICAvKiogXG4gICAgICogTWFnZSByZXBlYXRzIHRoZSBtZXRob2QgbmFtZSBcbiAgICAgKi9cbiAgICB2YXIgcGFydHMgPSBtZXRob2Quc3BsaXQoJ18nKTtcbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMSAmJiBwYXJ0c1swXSA9PSBwYXJ0c1sxXSA/IHBhcnRzWzBdIDogbWV0aG9kO1xuICB9XG5cbiAgLyoqIFxuICAgKiBXZSBvbmx5IGluY2x1ZGUgdGhpcyBzY3JpcHQgb24gY2hlY2tvdXQsIHNvIGl0J3MgYWx3YXlzIHRydWVcbiAgICovXG4gIGlzQ2hlY2tvdXQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogXG4gICAqIFJldHVybnMgdGhlIHNoaXBwaW5nIGRhdGEgYXMgYW4gb2JqZWN0IGluIHRoZSBzYW1lIGZvcm1hdCB0aGF0IHRoZSBhcGkgcmVjZWl2ZXMgXG4gICAqIFdlIGdldCB0aGUgYWRkcmVzcyBwYXJ0cyBzZXJ2ZXIgc2lkZSBoZXJlIFxuICAgKiBTb21lIGNoZWNrb3V0cyB3aWxsIG1vZGlmeSB0aGUgYWRkcmVzcyBpbiB3YXlzIG5vdCBzYXZlZCB0byBtYWdlIFxuICAgKi9cbiAgZ2V0U2hpcHBpbmdEYXRhKCkgeyBcbiAgICBzaGlwdGltaXplX2dldF9zaGlwcGluZ19hZGRyZXNzKCk7ICBcblxuICAgIHJldHVybiB7XG4gICAgICBcIkFkZHJlc3NcIjoge1xuICAgICAgICBcIkxhdFwiOiBcIlwiLFxuICAgICAgICBcIkxvbmdcIjogXCJcIixcbiAgICAgICAgJ1N0cmVldG5hbWUxJzogc2hpcHRpbWl6ZV9hZGRyZXNzLlN0cmVldG5hbWUxLFxuICAgICAgICAnU3RyZWV0bmFtZTInOiBzaGlwdGltaXplX2FkZHJlc3MuU3RyZWV0bmFtZTIsXG4gICAgICAgICdIb3VzZU51bWJlcic6ICcnLFxuICAgICAgICAnTnVtYmVyRXh0ZW5zaW9uJzogJycsXG4gICAgICAgICdQb3N0YWxDb2RlJzogc2hpcHRpbWl6ZV9hZGRyZXNzLlBvc3RhbENvZGUsXG4gICAgICAgICdDaXR5Jzogc2hpcHRpbWl6ZV9hZGRyZXNzLkNpdHksXG4gICAgICAgICdDb3VudHJ5Jzogc2hpcHRpbWl6ZV9hZGRyZXNzLkNvdW50cnksXG4gICAgICAgIFwiU3RhdGVcIjogc2hpcHRpbWl6ZV9hZGRyZXNzLlN0YXRlLFxuICAgICAgfSxcbiAgICAgIFwiQ2FycmllcklkXCI6IHRoaXMuZ2V0U2hpcHRpbWl6ZUlkKHRoaXMuZ2V0U2VsZWN0ZWRTaGlwcHBpbmdNZXRob2QoKSksIC8vaW4gcHJlc3Rhc2hvcCB3ZSBjYW4gZ2V0IHRoaXMgc2VydmVyIHNpZGUgXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBcbiAgICogQHBhcmFtIFBpY2t1cCBwaWNrdXAgLSBhIHBpY2t1cFBvaW50IGFzIHJlY2VpdmVkIGZyb20gdGhlIGFwaSBcbiAgICovXG4gIHNldFBpY2t1cFBvaW50KHBpY2t1cCkge1xuICAgIHRoaXMucGlja3VwUG9pbnQgPSBwaWNrdXA7XG5cbiAgICBsZXQgbGFiZWwgPSBwaWNrdXAuSW5mb3JtYXRpb24uTmFtZSA/IHBpY2t1cC5JbmZvcm1hdGlvbi5OYW1lIDogKHBpY2t1cC5JbmZvcm1hdGlvbi5BZGRyZXNzICsgXCIgXCIgKyBwaWNrdXAuSW5mb3JtYXRpb24uWmlwQ29kZSk7XG5cbiAgICAvLyAgTm90IHByZXNlbnQgaW4gYWxsIGNoZWNrb3V0IGNvbmZpZ3VyYXRpb25zIFxuICAgIGxldCBlU2hpcFRvID0galF1ZXJ5KFwiLnNoaXAtdG9cIik7XG5cbiAgICBpZiAoZVNoaXBUby5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoalF1ZXJ5KFwiI3NoaXB0b2xhYmVsXCIpLmxlbmd0aCA9PSAwKSB7IFxuICAgICAgICBlU2hpcFRvLmFwcGVuZChcIjxkaXYgaWQ9XFxcInNoaXB0b2xhYmVsXFxcIj48L2Rpdj5cIik7ICBcbiAgICAgIH0gXG4gICAgICBqUXVlcnkoXCIjc2hpcHRvbGFiZWxcIikuaHRtbCgnPHA+PGJyLz4nICsgc2hpcHRpbWl6ZV9zZWxlY3RlZF9waWNrdXAgKyBcIiA6IFwiICsgbGFiZWwgKyAnPC9wPicpO1xuICAgIH1cblxuICAgIGxldCBkYXRhID0ge1xuICAgICAgJ1BvaW50SWQnOiBwaWNrdXAuUG9pbnRJZCxcbiAgICAgICdMYWJlbCc6IGxhYmVsLFxuICAgICAgJ0V4dGVuZGVkaW5mbyc6IHBpY2t1cC5FeHRlbmRlZGluZm9cbiAgICB9O1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIGpRdWVyeS5nZXRKU09OKHNoaXB0aW1pemVfYWpheF9zYXZlX3BpY2t1cCwgZGF0YSwgKHJlc3ApID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3ApO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi9zaGlwdGltaXplLXV0aWxzLmpzJzsgIFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaGlwdGltaXplR21hcHMge1xuXG4gICAgY29uc3RydWN0b3Ioa2V5KSB7XG4gICAgICAgIHRoaXMuaXNTY3JpcHRMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgICAgIHRoaXMubWFwID0gbnVsbDtcbiAgICAgICAgdGhpcy5waWNrdXBQb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG5cbiAgICAgICAgLyoqIFxuICAgICAgICAgKiB0aGUgcm9vdCB1cmwgZm9yIHRoZSBpY29ucyBpdCdzIGRpZmZlcmVudCBmb3IgZXZlcnkgcGxhdGZvcm0gIFxuICAgICAgICAgKiBtYWtlIHN1cmUgdG8gaW5jbHVkZSBhIHRyYWlsaW5nIC8gXG4gICAgICAgICAqLyBcbiAgICAgICAgdGhpcy5pY29uX2ZvbGRlciA9IHNoaXB0aW1pemVfaWNvbl9mb2xkZXI7ICBcbiAgICAgICAgdGhpcy5pY29uX3NlbGVjdGVkID0gc2hpcHRpbWl6ZV9pY29uX2ZvbGRlcisnc2VsZWN0ZWQucG5nJztcbiAgICAgICAgdGhpcy5pY29uX2RlZmF1bHQgPSBzaGlwdGltaXplX2ljb25fZm9sZGVyKydkZWZhdWx0LnBuZyc7XG4gICAgICAgIHRoaXMuY3VycmVudF9pY29uID0gdGhpcy5pY29uX2RlZmF1bHQ7IFxuICAgIH1cblxuXG4gICAgLyoqIFxuICAgICAqIENoZWNrcyBpZiB3ZSBoYXZlIGFuIGljb24gZm9yIHRoaXMgY2Fycmllci5cbiAgICAgKiBJZiB5ZXMgdGhlbiBjaGFuZ2UgdGhlIGNhcnJpZXIgaWNvblxuICAgICAqIElmIG5vdCB0aGVuIHVzZSB0aGUgZGVmYXVsdCBpY29uXG4gICAgICogXG4gICAgICogQHBhcmFtIGludCBjYXJyaWVyX2lkIC0gdGhlIGNhcnJpZXIgaWQgXG4gICAgICovIFxuICAgIHNldENhcnJpZXJJY29uKGNhcnJpZXJfaWQpe1xuICAgICAgbGV0IGNhcnJpZXJfaWNvbl91cmwgPSB0aGlzLmljb25fZm9sZGVyKycnK2NhcnJpZXJfaWQrJy5wbmcnOyBcbiAgICAgIHRoaXMuY3VycmVudF9pY29uID0gVXRpbHMuaXNVcmxWYWxpZChjYXJyaWVyX2ljb25fdXJsKSA/ICBjYXJyaWVyX2ljb25fdXJsIDogdGhpcy5pY29uX2RlZmF1bHQ7IFxuICAgIH1cblxuXG4gICAgLyoqIFxuICAgICAqIGlmIHRoZSBzY3JpcHQgaGFzIG5vdCBiZWVuIGxvYWRlZCAsIGxvYWQgaXQgXG4gICAgICovXG4gICAgZ3JhbnRSZWFkeSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2NyaXB0TG9hZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRTY3JpcHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvYWRTY3JpcHQoKSB7XG4gICAgICAgIGlmKHR5cGVvZihnb29nbGUpID09ICd1bmRlZmluZWQnIHx8ICB0eXBlb2YoZ29vZ2xlLm1hcHMpID09ICd1bmRlZmluZWQnKXtcbiAgICAgICAgICAgIFV0aWxzLmluamVjdEV4dGVybmFsU2NyaXB0KFwiaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT1cIiArIHRoaXMua2V5ICsgXCImY2FsbGJhY2s9c2hpcHRpbWl6ZS5sb2FkTWFwXCIpOyAgICBcbiAgICAgICAgfSBcbiAgICAgICAgdGhpcy5pc1NjcmlwdExvYWRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIExvYWQgdGhlIG1hcCBpbnRvIHRoZSBlbGVtZW50IFxuICAgICAqIFRoaXMgZnVuY3Rpb24gbmVlZHMgdGhlIHNjcmlwdCB0byBiZSBsb2FkZWQgXG4gICAgICovXG4gICAgbG9hZE1hcCgpIHsgICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcImRpc3BsYXlpbmcgbWFwIG9uIGNvbnRhaW5lciB3aXRoIFwiICsgalF1ZXJ5KFwiLnNoaXB0aW1pemUtcGlja3VwX19tYXBcIikud2lkdGgoKSArIFwiIFwiK2pRdWVyeShcIi5zaGlwdGltaXplLXBpY2t1cF9fbWFwXCIpLmhlaWdodCgpICxqUXVlcnkoXCIuc2hpcHRpbWl6ZS1waWNrdXBfX21hcFwiKS5nZXQoMCkpOyBcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGpRdWVyeShcIi5zaGlwdGltaXplLXBpY2t1cF9fbWFwXCIpLmdldCgwKSwge1xuICAgICAgICAgICAgY2VudGVyOiB7IGxhdDogLTM0LjM5NywgbG5nOiAxNTAuNjQ0IH0sXG4gICAgICAgICAgICB6b29tOiAxNixcbiAgICAgICAgICAgIG1hcFR5cGVDb250cm9sOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIGNlbnRlciB0aGUgbWFwIFxuICAgICAqL1xuICAgIGNlbnRlck1hcChsYXQsIGxuZykge1xuICAgICAgICB0aGlzLm1hcC5zZXRDZW50ZXIobmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsYXQsIGxuZykpO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBFeHRyYWN0IHRoZSBjb3VudHJ5IGNvZGUgZnJvbSBhIGdlb2NvZGUgcmVzdWx0XG4gICAgICogQHBhcmFtIGdlb2NvZGUgLSBhIGdvb2dsZS5tYXBzLkdlb2NvZGVyIHJlc3VsdCBcbiAgICAgKiBAcmV0dXJuIHN0cmluZyBhbHBoYS0yIGNvZGUgZm9yIHRoZSBjb3VudHJ5IG5hbWUgXG4gICAgICovIFxuICAgIGdldENvdW50cnlDb2RlRnJvbVJlc3VsdChnZW9jb2RlKXtcbiAgICAgIGlmKHR5cGVvZihnZW9jb2RlLmFkZHJlc3NfY29tcG9uZW50cykgPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgIHJldHVybiBcIlwiOyBcbiAgICAgIH1cblxuICAgICAgbGV0IGNvbXBvbmVudHMgPSBnZW9jb2RlLmFkZHJlc3NfY29tcG9uZW50cztcbiAgICAgIGZvciggbGV0IGk9MDsgaSA8IGNvbXBvbmVudHMubGVuZ3RoOyArK2kgKXtcbiAgICAgICAgbGV0IHR5cGVzID0gY29tcG9uZW50c1tpXS50eXBlczsgXG5cbiAgICAgICAgZm9yKGxldCBqPTA7IGogPCB0eXBlcy5sZW5ndGg7ICsraiApe1xuICAgICAgICAgIGlmKCB0eXBlc1tqXSA9PSAnY291bnRyeScpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnRzW2ldLnNob3J0X25hbWU7IFxuICAgICAgICAgIH0gXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIFxuICAgICAqIEBwYXJhbSBzaGlwcGluZ0RhdGEsIHRoZSBhZGRyZXNzIHBhcnRzICAgICAgIFxuICAgICAqIEBwYXJhbSBmX2NhbGxiYWNrICwgdGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhbGwgbWlnaHR5IGdvb2dsZSByZXR1cm5zIGEgcmVzdWx0IFxuICAgICAqLyBcbiAgICBnZW9jb2RlKHNoaXBwaW5nRGF0YSwgIGZfY2FsbGJhY2spIHsgXG4gICAgICBpZih0eXBlb2YoZ29vZ2xlKSA9PSAndW5kZWZpbmVkJyl7IC8vc2NyaXB0IG5vdCBsb2FkZWQgeWV0XG4gICAgICAgIHNldFRpbWVvdXQoKCk9Pnt0aGlzLmdlb2NvZGUoc2hpcHBpbmdEYXRhLCBmX2NhbGxiYWNrKTsgfSwgMjAwKTsgXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgICBsZXQgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcbiAgICAgICAgbGV0IG1lICA9IHRoaXM7IFxuXG4gICAgICAgIHZhciBhZGRyZXNzID0gc2hpcHBpbmdEYXRhLkFkZHJlc3MuU3RyZWV0bmFtZTEgKyBcIiBcIiArIHNoaXBwaW5nRGF0YS5BZGRyZXNzLlN0cmVldG5hbWUyICsgXCIgXCIgKyBzaGlwcGluZ0RhdGEuQWRkcmVzcy5wb3N0YWxDb2RlICsgXCIgXCIgKyBzaGlwcGluZ0RhdGEuQWRkcmVzcy5DaXR5ICsgXCIgXCIgKyBzaGlwcGluZ0RhdGEuQWRkcmVzcy5TdGF0ZSArIFwiIFwiICsgc2hpcHBpbmdEYXRhLkFkZHJlc3MuQ291bnRyeTtcbiAgICAgICAgY29uc29sZS5sb2coJ2dlb2NvZGluZyAnICsgYWRkcmVzcyk7XG5cbiAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7ICdhZGRyZXNzJzogYWRkcmVzcyB9LCBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGxldCBnZW9jb2RlID0ge2lzbzI6JycsIGxhdDonJywgbG5nOicnfTtcblxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSAnT0snKSB7XG4gICAgICAgICAgICAgICAgZ2VvY29kZSA9IHJlc3VsdHNbMF07XG4gICAgICAgICAgICB9ICBcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHZW9jb2RlIHdhcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb246ICcgKyBzdGF0dXMpO1xuICAgICAgICAgICAgICAgIGZfY2FsbGJhY2soZ2VvY29kZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGxhdGxuZyA9IGdlb2NvZGUuZ2VvbWV0cnkubG9jYXRpb247XG5cbiAgICAgICAgICAgIGdlb2NvZGUuaXNvMiA9IG1lLmdldENvdW50cnlDb2RlRnJvbVJlc3VsdChnZW9jb2RlKTtcbiAgICAgICAgICAgIGdlb2NvZGUubGF0ID0gbGF0bG5nLmxhdCgpOyBcbiAgICAgICAgICAgIGdlb2NvZGUubG5nID0gbGF0bG5nLmxuZygpOyBcblxuICAgICAgICAgICAgZl9jYWxsYmFjayhnZW9jb2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xlYXJNYXJrZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5tYXJrZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJzW2ldLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogQWRkIHRoZSBtYXJrZXJzIHRvIG1hcCBcbiAgICAgKiBAcGFyYW0gYXJyYXkgcGlja3VwUG9pbnRzIC0gYW4gYXJyYXkgb2YgcGlja3VwUG9pbnRzXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gYSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIG1hcmtlciBpcyBjbGlja2VkIFxuICAgICAqL1xuICAgIGFkZE1hcmtlcnMocGlja3VwUG9pbnRzLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLnBpY2t1cFBvaW50cyA9IHBpY2t1cFBvaW50cztcblxuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHBpY2t1cFBvaW50cy5sZW5ndGg7ICsreCkge1xuICAgICAgICAgICAgdGhpcy5tYXJrZXJzW3hdID0gdGhpcy5nZXRNYXJrZXIocGlja3VwUG9pbnRzW3hdKTtcbiAgICAgICAgICAgIC8vICAgIHdlIG5lZWQgdG8gZG8gdGhpcyBiZWNhdXNlIHRoZSB2YWx1ZXMgZm9yIGxhdCxsbmcgd2UgaGF2ZSBhcmUgcm91bmRlZCwgc28gdGhleSB3aWxsIG5vdCBtYXRjaCB0aGUgb25lcyByZXR1cm5lZCBieSBnb29nbGVcbiAgICAgICAgICAgIHBpY2t1cFBvaW50c1t4XS5tYXJrZXIgPSB0aGlzLm1hcmtlcnNbeF07XG5cbiAgICAgICAgICAgIHRoaXMubWFya2Vyc1t4XS5hZGRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmKHR5cGVvZihjYWxsYmFjaykhPSAndW5kZWZpbmVkJyl7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soeCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5maXRCb3VuZHMoKVxuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBSZXR1cm4gYSBtYXJrZXIgZm9yIHRoZSBnbWFwcyBcbiAgICAgKi9cbiAgICBnZXRNYXJrZXIocGlja3VwUG9pbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxldCBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHBpY2t1cFBvaW50LkxhdCwgcGlja3VwUG9pbnQuTG9uZyksXG4gICAgICAgICAgICBtYXA6IHRoaXMubWFwLFxuICAgICAgICAgICAgaWNvbjoge1xuICAgICAgICAgICAgICB1cmw6ICB0aGlzLmN1cnJlbnRfaWNvblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiBcblxuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgICB9XG5cbiAgICBmaXRCb3VuZHMoKSB7XG4gICAgICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuICAgICAgZm9yKCBsZXQgeCA9IDA7IHg8IHRoaXMubWFya2Vycy5sZW5ndGg7ICsreCApe1xuICAgICAgICBib3VuZHMuZXh0ZW5kKHRoaXMubWFya2Vyc1t4XS5nZXRQb3NpdGlvbigpKTsgXG4gICAgICB9IFxuICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgfVxuIFxuICAgIC8qKlxuICAgICAqIFJlc2V0IGFsbCBtYXJrZXJzICBcbiAgICAgKiBTZWxlY3QgdGhlIG1hcmtlciBvZiBpbmRleCBpZHggaW4gbWFwIFxuICAgICAqIEBwYXJhbSBpbnQgaWR4IC0gdGhlIGluZGV4IHRvIHNlbGVjdCBcbiAgICAgKi9cbiAgICBzZWxlY3RNYXJrZXJCeUlkeChpZHgpIHsgXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLm1hcmtlcnNbaV0uc2V0SWNvbihcbiAgICAgICAgICAgICAgaWR4ID09IGkgXG4gICAgICAgICAgICAgID8gXG4gICAgICAgICAgICAgIHRoaXMuaWNvbl9zZWxlY3RlZFxuICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudF9pY29uXG4gICAgICAgICAgICApOyAgXG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi9zaGlwdGltaXplLXV0aWxzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hpcHRpbWl6ZU9wZW5NYXAge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaXNTY3JpcHRMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgICAgIHRoaXMubWFwID0gbnVsbDtcblxuICAgICAgICAvKiogXG4gICAgICAgICAqIHRoZSByb290IHVybCBmb3IgdGhlIGljb25zIGl0J3MgZGlmZmVyZW50IGZvciBldmVyeSBwbGF0Zm9ybSAgXG4gICAgICAgICAqIG1ha2Ugc3VyZSB0byBpbmNsdWRlIGEgdHJhaWxpbmcgLyBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaWNvbl9mb2xkZXIgPSBzaGlwdGltaXplX2ljb25fZm9sZGVyO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdHJpbmcgaW1hZ2VVcmwgLSBmdWxsIHVybCB0byB0aGUgaWNvbiBcbiAgICAgKiBAcmV0dXJuIEwuaWNvbiBvYmplY3QgXG4gICAgICovXG4gICAgY3JlYXRlSWNvbihpbWFnZVVybCkge1xuICAgICAgIHJldHVybiBMLmljb24oe1xuICAgICAgICAgICAgaWNvblVybDogaW1hZ2VVcmwsXG4gICAgICAgICAgICBpY29uU2l6ZTogWzUwLCA1MF0sIC8vIHNpemUgb2YgdGhlIGljb24gXG4gICAgICAgICAgICBpY29uQW5jaG9yOiBbMjUsIDI1XSwgLy8gcG9pbnQgb2YgdGhlIGljb24gd2hpY2ggd2lsbCBjb3JyZXNwb25kIHRvIG1hcmtlcidzIGxvY2F0aW9uIFxuICAgICAgICAgICAgcG9wdXBBbmNob3I6IFstMjUsIC01MF0gLy8gcG9pbnQgZnJvbSB3aGljaCB0aGUgcG9wdXAgc2hvdWxkIG9wZW4gcmVsYXRpdmUgdG8gdGhlIGljb25BbmNob3JcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIEBwYXJhbSBkZWNpbWFsIGxhdCBcbiAgICAgKiBAcGFyYW0gZGVjaW1hbCBsbmcgXG4gICAgICovIFxuICAgIGNlbnRlck1hcChsYXQsIGxuZyl7XG4gICAgICAgIHRoaXMubWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgICAgIGxldCBsYXRsbmcgPSBMLmxhdExuZyhsYXQsIGxuZyk7ICBcbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogaWYgdGhlIHNjcmlwdCBoYXMgbm90IGJlZW4gbG9hZGVkICwgbG9hZCBpdC4gXG4gICAgICogV2UgdXNlIHRoaXMgZnVuY3Rpb24gYmVjYXVzZSB3ZSBvbmx5IHdhbnQgdG8gbG9hZCB0aGUgc2NyaXB0IHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBidXR0b24gXG4gICAgICovXG4gICAgZ3JhbnRSZWFkeSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2NyaXB0TG9hZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRTY3JpcHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqICBcbiAgICAgKiBAcGFyYW0gc2hpcHBpbmdEYXRhLCB0aGUgYWRkcmVzcyBwYXJ0cyAgICAgICBcbiAgICAgKiBAcGFyYW0gZl9jYWxsYmFjayAsIHRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gYWxsIG1pZ2h0eSBnb29nbGUgcmV0dXJucyBhIHJlc3VsdCBcbiAgICAgKi9cbiAgICBnZW9jb2RlKHNoaXBwaW5nRGF0YSwgZl9jYWxsYmFjaykge1xuICAgICAgICBjb25zb2xlLmxvZyhzaGlwcGluZ0RhdGEpO1xuICAgICAgICB0aGlzLmdyYW50UmVhZHkoKTsgXG5cbiAgICAgICAgalF1ZXJ5LmdldEpTT04oXCJodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Zm9ybWF0PWpzb24mYWRkcmVzc2RldGFpbHM9MVwiICtcbiAgICAgICAgICAgIFwiJmNpdHk9XCIgKyBzaGlwcGluZ0RhdGEuQWRkcmVzcy5DaXR5ICtcbiAgICAgICAgICAgIFwiJmNvdW50cnk9XCIgKyBzaGlwcGluZ0RhdGEuQWRkcmVzcy5Db3VudHJ5LCB7fSwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGdlb2NvZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICdpc28yJzogJycsXG4gICAgICAgICAgICAgICAgICAgICdsYXQnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgJ2xuZyc6ICcnXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsb2NhdGlvbiA9IHJlc3BvbnNlWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgIGdlb2NvZGUuaXNvMiA9IGxvY2F0aW9uLmFkZHJlc3MuY291bnRyeV9jb2RlO1xuXG4gICAgICAgICAgICAgICAgICAgIGdlb2NvZGUubGF0ID0gbG9jYXRpb24ubGF0O1xuICAgICAgICAgICAgICAgICAgICBnZW9jb2RlLmxuZyA9IGxvY2F0aW9uLmxvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZl9jYWxsYmFjayhnZW9jb2RlKTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGxvYWRTY3JpcHQoKSB7XG4gICAgICAgIGlmICh0eXBlb2YoTCkgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIFV0aWxzLmluamVjdEV4dGVybmFsU2NyaXB0KFNISVBUSU1JWkVfTEVBRkxFVF9VUkwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc1NjcmlwdExvYWRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMubG9hZE1hcCgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIExlYWZsZXQgZG9lcyBub3QgcmVjZWl2ZSBhIGNhbGxiYWNrIHNvIHdlIHdhaXQgaGVyZSBmb3IgdGhlIHNjcmlwdCB0byBiZSBsb2FkZWQgXG4gICAgICovXG4gICAgbG9hZE1hcCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZihMKSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMubG9hZE1hcCgpOyB9LCAxNTAwKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWFwIG5vdCBsb2FkZWQsIHNldHRpbWVvdXQgXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pY29uX3NlbGVjdGVkID0gdGhpcy5jcmVhdGVJY29uKHNoaXB0aW1pemVfaWNvbl9mb2xkZXIgKyAnc2VsZWN0ZWQucG5nJyk7XG4gICAgICAgIHRoaXMuaWNvbl9kZWZhdWx0ID0gdGhpcy5jcmVhdGVJY29uKHNoaXB0aW1pemVfaWNvbl9mb2xkZXIgKyAnZGVmYXVsdC5wbmcnKTtcbiAgICAgICAgdGhpcy5jdXJyZW50X2ljb24gPSB0aGlzLmljb25fZGVmYXVsdDtcblxuICAgICAgICB0aGlzLm1hcCA9IG5ldyBMLm1hcChqUXVlcnkoXCIuc2hpcHRpbWl6ZS1waWNrdXBfX21hcFwiKS5nZXQoMCksIHtcbiAgICAgICAgICAgIFwiem9vbVwiOiAxNixcbiAgICAgICAgICAgIFwiY2VudGVyXCI6IFs1MS41MDUsIC0wLjA5XVxuICAgICAgICB9KTtcblxuICAgICAgICBMLnRpbGVMYXllcignaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLCB7XG4gICAgICAgICAgICBcImF0dHJpYnV0aW9uXCI6ICcmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycydcbiAgICAgICAgfSkuYWRkVG8odGhpcy5tYXApO1xuICAgIH1cblxuICAgIGNsZWFyTWFya2VycygpIHtcbiAgICAgICAgaWYgKHRoaXMubWFya2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWFya2Vycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubWFya2Vyc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgfVxuXG5cbiAgICAvKiogXG4gICAgICogQWRkIHRoZSBtYXJrZXJzIHRvIG1hcCBcbiAgICAgKiBAcGFyYW0gYXJyYXkgcGlja3VwUG9pbnRzIC0gYW4gYXJyYXkgb2YgcGlja3VwUG9pbnRzXG4gICAgICovXG4gICAgYWRkTWFya2VycyhwaWNrdXBQb2ludHMsY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5waWNrdXBQb2ludHMgPSBwaWNrdXBQb2ludHM7IFxuXG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgcGlja3VwUG9pbnRzLmxlbmd0aDsgKyt4KSB7XG4gICAgICAgICAgICB0aGlzLm1hcmtlcnNbeF0gPSB0aGlzLmdldE1hcmtlcihwaWNrdXBQb2ludHNbeF0pO1xuICAgICAgICAgICAgLy8gICAgd2UgbmVlZCB0byBkbyB0aGlzIGJlY2F1c2UgdGhlIHZhbHVlcyBmb3IgbGF0LGxuZyB3ZSBoYXZlIGFyZSByb3VuZGVkLCBzbyB0aGV5IHdpbGwgbm90IG1hdGNoIHRoZSBvbmVzIHJldHVybmVkIGJ5IGdvb2dsZVxuICAgICAgICAgICAgdGhpcy5waWNrdXBQb2ludHNbeF0ubWFya2VyID0gdGhpcy5tYXJrZXJzW3hdO1xuXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnNbeF0ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZihjYWxsYmFjaykgPT0gJ2Z1bmN0aW9uJyl7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5maXRCb3VuZHMoKTtcbiAgICB9XG5cbiAgICByZXNldE1hcmtlcihtYXJrZXIpIHtcbiAgICAgICAgbWFya2VyLnNldEljb24odGhpcy5pY29uX2RlZmF1bHQpO1xuICAgIH1cblxuICAgIHNlbGVjdE1hcmtlcihtYXJrZXIpIHtcbiAgICAgICAgbWFya2VyLnNldEljb24odGhpcy5pY29uX3NlbGVjdGVkKTtcbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogQWRqdXN0IHRoZSB6b29tIGluIHRoZSBtYXAgdG8gZGlzcGxheSBhbGwgdGhlIG1hcmtlcnMgXG4gICAgICogVGhlcmUncyBhIGZpdCBib3VuZHMgdGhhdCByZWNlaXZlcyAyIGNvcm5lcnMsIGJ1dCBjYWxjdWxhdGluZyB0aGVtIGlzIHVwIHRvIHVzLiBcbiAgICAgKiBjb3JuZXJzOiB0b3AgbGVmdCwgYm90dG9tIHJpZ2h0ICAgICBcbiAgICAgKiB0aGVuIHdlIGNlbnRlciB0aGUgbWFwIGF0IHRoZSBjZW50ZXIgb2YgdGhlIHNxdWFyZSAgXG4gICAgICovXG4gICAgZml0Qm91bmRzKCkge1xuICAgICAgICBsZXQgYm90dG9tTGVmdCA9IFt0aGlzLnBpY2t1cFBvaW50c1swXS5MYXQsIHRoaXMucGlja3VwUG9pbnRzWzBdLkxvbmddO1xuICAgICAgICBsZXQgdG9wUmlnaHQgPSBbdGhpcy5waWNrdXBQb2ludHNbMF0uTGF0LCB0aGlzLnBpY2t1cFBvaW50c1swXS5Mb25nXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGlja3VwUG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBsZXQgbGF0ID0gdGhpcy5waWNrdXBQb2ludHNbaV0uTGF0O1xuICAgICAgICAgICAgbGV0IGxuZyA9IHRoaXMucGlja3VwUG9pbnRzW2ldLkxvbmc7XG5cbiAgICAgICAgICAgIGlmIChsYXQgPCBib3R0b21MZWZ0WzBdKSB7XG4gICAgICAgICAgICAgICAgYm90dG9tTGVmdFswXSA9IGxhdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxhdCA+IHRvcFJpZ2h0WzBdKSB7XG4gICAgICAgICAgICAgICAgdG9wUmlnaHRbMF0gPSBsYXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsbmcgPiB0b3BSaWdodFsxXSkge1xuICAgICAgICAgICAgICAgIHRvcFJpZ2h0WzFdID0gbG5nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobG5nIDwgYm90dG9tTGVmdFsxXSkge1xuICAgICAgICAgICAgICAgIGJvdHRvbUxlZnRbMV0gPSBsbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCBjZW50ZXJYID0gYm90dG9tTGVmdFswXSArICh0b3BSaWdodFswXSAtIGJvdHRvbUxlZnRbMF0pIC8gMjtcbiAgICAgICAgbGV0IGNlbnRlclkgPSBib3R0b21MZWZ0WzFdICsgKHRvcFJpZ2h0WzFdIC0gYm90dG9tTGVmdFsxXSkgLyAyO1xuXG4gICAgICAgIHRoaXMubWFwLnBhblRvKFtjZW50ZXJYLCBjZW50ZXJZXSk7XG5cbiAgICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKFtcbiAgICAgICAgICAgIGJvdHRvbUxlZnQsXG4gICAgICAgICAgICB0b3BSaWdodFxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogUmV0dXJuIGEgbWFya2VyIGZvciB0aGUgb3BlbkxheWVycyBcbiAgICAgKiBJY29uQW5jaG9yOiBUaGUgY29vcmRpbmF0ZXMgb2YgdGhlIFwidGlwXCIgb2YgdGhlIGljb24gKHJlbGF0aXZlIHRvIGl0cyB0b3AgbGVmdCBjb3JuZXIpLiBcbiAgICAgKiBUaGUgaWNvbiB3aWxsIGJlIGFsaWduZWQgc28gdGhhdCB0aGlzIHBvaW50IGlzIGF0IHRoZSBtYXJrZXIncyBnZW9ncmFwaGljYWwgbG9jYXRpb24uIFxuICAgICAqIENlbnRlcmVkIGJ5IGRlZmF1bHQgaWYgc2l6ZSBpcyBzcGVjaWZpZWQsIGFsc28gY2FuIGJlIHNldCBpbiBDU1Mgd2l0aCBuZWdhdGl2ZSBtYXJnaW5zLlxuICAgICAqL1xuICAgIGdldE1hcmtlcihwaWNrdXBQb2ludCkge1xuICAgICAgICBsZXQgbWFya2VyID0gTC5tYXJrZXIoW3BpY2t1cFBvaW50LkxhdCwgcGlja3VwUG9pbnQuTG9uZ10sIHtcbiAgICAgICAgICAgIFwiaWNvblwiOiB0aGlzLmN1cnJlbnRfaWNvbixcbiAgICAgICAgICAgIFwidGl0bGVcIjogcGlja3VwUG9pbnQuSW5mb3JtYXRpb24uTmFtZSArIFwiXFxuXCIgKyBwaWNrdXBQb2ludC5JbmZvcm1hdGlvbi5BZGRyZXNzXG4gICAgICAgIH0pO1xuICAgICAgICBtYXJrZXIuYWRkVG8odGhpcy5tYXApO1xuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBDaGVja3MgaWYgd2UgaGF2ZSBhbiBpY29uIGZvciB0aGlzIGNhcnJpZXIuXG4gICAgICogSWYgeWVzIHRoZW4gY2hhbmdlIHRoZSBjYXJyaWVyIGljb25cbiAgICAgKiBJZiBub3QgdGhlbiB1c2UgdGhlIGRlZmF1bHQgaWNvblxuICAgICAqIFxuICAgICAqIEBwYXJhbSBpbnQgY2Fycmllcl9pZCAtIHRoZSBjYXJyaWVyIGlkIFxuICAgICAqL1xuICAgIHNldENhcnJpZXJJY29uKGNhcnJpZXJfaWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZihMKSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuc2V0Q2Fycmllckljb24oY2Fycmllcl9pZCk7IH0sIDIwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNhcnJpZXJfaWNvbl91cmwgPSB0aGlzLmljb25fZm9sZGVyICsgJycgKyBjYXJyaWVyX2lkICsgJy5wbmcnO1xuICAgICAgICB0aGlzLmN1cnJlbnRfaWNvbiA9IFV0aWxzLmlzVXJsVmFsaWQoY2Fycmllcl9pY29uX3VybCkgPyB0aGlzLmNyZWF0ZUljb24oY2Fycmllcl9pY29uX3VybCkgOiB0aGlzLmljb25fZGVmYXVsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBhbGwgbWFya2VycyAgXG4gICAgICogU2VsZWN0IHRoZSBtYXJrZXIgb2YgaW5kZXggaWR4IGluIG1hcCBcbiAgICAgKiBAcGFyYW0gaW50IGlkeCAtIHRoZSBpbmRleCB0byBzZWxlY3QgXG4gICAgICovXG4gICAgc2VsZWN0TWFya2VyQnlJZHgoaWR4KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLm1hcmtlcnNbaV0uc2V0SWNvbihcbiAgICAgICAgICAgICAgICBpZHggPT0gaSA/XG4gICAgICAgICAgICAgICAgdGhpcy5pY29uX3NlbGVjdGVkIDpcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfaWNvblxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgJy4vc2Nzcy9zaGlwdGltaXplLnNjc3MnO1xuaW1wb3J0ICcuL2Nzcy9sZWFmbGV0LmNzcyc7XG5cbmltcG9ydCBVdGlscyBmcm9tICcuL2pzL3NoaXB0aW1pemUtdXRpbHMuanMnO1xuaW1wb3J0IE1hZ2VudG8gZnJvbSAnLi9qcy9zaGlwdGltaXplLW1hZ2VudG8uanMnO1xuXG5pbXBvcnQgR29vZ2xlTWFwIGZyb20gJy4vanMvc2hpcHRpbWl6ZS1nbWFwcy5qcyc7XG5pbXBvcnQgT3BlblN0cmVldE1hcCBmcm9tICcuL2pzL3NoaXB0aW1pemUtb3Blbi1tYXAuanMnO1xuXG4vKiogXG4gKiBDbGFzcyBTaGlwdGltaXplIGRlcGVuZHMgb24galF1ZXJ5LiBcbiAqIENoZWNrIGlmIHdlIGFyZSBtZWFudCB0byBhcHBlbmQgYSBtYXAgXG4gKiBcbiAqIFBsYXRmb3JtIGRlcGVuZGVudCBmdW5jdGlvbnMgbWFya2VkIHdpdGggICAqIEBwbGF0Zm9ybURlcGVuZGVudCBcbiAqL1xuY2xhc3MgU2hpcHRpbWl6ZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihhamF4X3VybCkge1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBbXTsgLy9waWNrdXAge2xhdCwgbG5nfSBcbiAgICAgICAgdGhpcy5pc01hcExvYWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdtYXBzX2tleSA9IHNoaXB0aW1pemVfbWFwc19rZXk7XG4gICAgICAgIHRoaXMub3Blbk1hcE1hcmtlckljb25zID0ge307XG4gICAgICAgIHRoaXMuYWpheF91cmwgPSBhamF4X3VybDsgLy8gcGxhdGZvcm0gZGVwZW5kZW50IFxuXG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBuZXcgTWFnZW50byh0aGlzLmFqYXhfdXJsKTtcblxuICAgICAgICB0aGlzLm1hcCA9IHNoaXB0aW1pemVfbWFwc19rZXkgPyBuZXcgR29vZ2xlTWFwKHNoaXB0aW1pemVfbWFwc19rZXkpIDogbmV3IE9wZW5TdHJlZXRNYXAoKTtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybS5pc0NoZWNrb3V0KCk7IFxuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBTaG93IHRoZSBtYXAgdG8gdGhlIHVzZXIgXG4gICAgICovXG4gICAgc2hvd01hcCgpIHtcbiAgICAgICAgdGhpcy5tYXAuZ3JhbnRSZWFkeSgpO1xuICAgICAgICB0aGlzLnVzZXJTY3JvbGwgPSBqUXVlcnkoJ2h0bWwsYm9keScpLnNjcm9sbFRvcCgpOyBcbiAgICAgICAgalF1ZXJ5KCdodG1sLGJvZHknKS5zY3JvbGxUb3AoMCk7IFxuICAgICAgICBqUXVlcnkoXCIuc2hpcHRpbWl6ZS1waWNrdXBcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7IFxuICAgICAgICB0aGlzLnBsYXRmb3JtLnBpY2t1cFBvaW50ID0ge307XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIEhpZGUgdGhlIG1hcCAgIFxuICAgICAqL1xuICAgIGhpZGVNYXAoKSB7XG4gICAgICAgIGpRdWVyeShcIi5zaGlwdGltaXplLXBpY2t1cFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgalF1ZXJ5KFwiLnNoaXB0aW1pemUtcGlja3VwX19lcnJvclwiKS5oaWRlKCk7XG4gICAgICAgIGpRdWVyeSgnaHRtbCxib2R5Jykuc2Nyb2xsVG9wKHRoaXMudXNlclNjcm9sbCk7IFxuICAgIH1cblxuICAgIGNsZWFyTWFya2VycygpIHtcbiAgICAgICAgdGhpcy5tYXAuY2xlYXJNYXJrZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIEdlbmVyYXRlIHRoZSBpbnB1dHMgZm9yIHRoZSB1c2VyIHRvIGFwcGVuZCBleHRyYSBpbmZvIGlmIG5lY2Vzc2FyeSBcbiAgICAgKiBUaGUgaWQgb2YgdGhlc2UgZmllbGRzIGlzIGluIHRoZSBmb3JtYXQgc2hpcHRpbWl6ZV9leHRyYV97UG9pbnRJZH1fe0ZpZWxkSWR9XG4gICAgICovXG4gICAgZ2V0RXh0ZW5kZWRJbmZvSHRtbChwaWNrdXBQb2ludCkge1xuICAgICAgICBpZiAoIXBpY2t1cFBvaW50LkV4dGVuZGVkSW5mbyB8fCB0eXBlb2YocGlja3VwUG9pbnQuRXh0ZW5kZWRJbmZvLmxlbmd0aCkgPT0ndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHRtbCA9ICcnO1xuXG4gICAgICAgIGZvciAobGV0IHggPSAwOyBwaWNrdXBQb2ludC5FeHRlbmRlZEluZm8gJiYgeCA8IHBpY2t1cFBvaW50LkV4dGVuZGVkSW5mby5sZW5ndGg7ICsreCkge1xuICAgICAgICAgICAgbGV0IGV4dHJhSW5mbyA9IHBpY2t1cFBvaW50LkV4dGVuZGVkSW5mb1t4XTtcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJzaGlwdGltaXplLXBpY2t1cF9fZXh0ZW5kZWRcIj4nICtcbiAgICAgICAgICAgICAgICAnPGxhYmVsIGNsYXNzPVwic2hpcHRpbWl6ZS1waWNrdXBfX2V4dGVuZGVkX2xhYmVsIFwiPicgKyBleHRyYUluZm8uVGVrc3QgKyAnPC9sYWJlbD4nICtcbiAgICAgICAgICAgICAgICAnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInNoaXB0aW1pemVfcGlja3VwX2V4dGVuZGVkX3ZhbHVlXCIgdmFsdWU9XCJcIiBpZD1cInNoaXB0aW1pemVfZXh0cmFfJyArIHBpY2t1cFBvaW50LlBvaW50SWQgKyAnXycgKyBleHRyYUluZm8uRmllbGRJZCArICdcIi8+ICcgK1xuICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJzaGlwdGltaXplX3BpY2t1cF9leHRlbmRlZF9pZFwiIGlkPVwic2hpcHRpbWl6ZV9waWNrdXBcIiB2YWx1ZT1cIicgKyBleHRyYUluZm8uRmllbGRJZCArICdcIi8+ICcgK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgYWxsIG1hcmtlcnMgIFxuICAgICAqIFNlbGVjdCB0aGUgbWFya2VyIG9mIGluZGV4IGlkeCBpbiBtYXAgXG4gICAgICovXG4gICAgc2VsZWN0UG9pbnRGcm9tTGlzdEluTWFwKGlkeCkge1xuICAgICAgICBqUXVlcnkoXCJpbnB1dFtuYW1lPSdzaGlwdGltaXplX19wb2ludCddXCIpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgIHRoaXMubWFwLnNlbGVjdE1hcmtlckJ5SWR4KGlkeCk7XG5cbiAgICAgICAgalF1ZXJ5KGpRdWVyeShcImlucHV0W25hbWU9J3NoaXB0aW1pemVfX3BvaW50J11cIikuZ2V0KGlkeCkpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICB9XG5cblxuICAgIC8qKiBcbiAgICAgKiBXaGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgdmFsaWRhdGUgYnV0dG9uIFxuICAgICAqL1xuICAgIHNlbGVjdEZyb21MaXN0KCkge1xuICAgICAgICBsZXQgaWR4ID0galF1ZXJ5KFwiaW5wdXRbbmFtZT0nc2hpcHRpbWl6ZV9fcG9pbnQnXTpjaGVja2VkXCIpLnZhbCgpO1xuICAgICAgICBcbiAgICAgICAgaWYoIXRoaXMucGlja3VwUG9pbnRzIHx8IHR5cGVvZih0aGlzLnBpY2t1cFBvaW50c1tpZHhdKSA9PSAndW5kZWZpbmVkJyl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgcGlja3VwLiBEaWQgdGhlIHVzZXIgY2xpY2sgc2VsZWN0IGJlZm9yZSBzZWxlY3RpbmcgYSBwb2ludD9cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgbGV0IHBpY2t1cCA9IHRoaXMucGlja3VwUG9pbnRzW2lkeF07XG4gICAgICAgIGxldCBleHRyYSA9ICcnO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBwaWNrdXAuRXh0ZW5kZWRJbmZvICYmIGkgPCBwaWNrdXAuRXh0ZW5kZWRJbmZvLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBleHRyYSArPSBcIjxici8+XCIgKyBwaWNrdXAuRXh0ZW5kZWRJbmZvW2ldLlRla3N0ICsgJzogJyArIGpRdWVyeShcIiNzaGlwdGltaXplX2V4dHJhX1wiICsgcGlja3VwLlBvaW50SWQgKyBcIl9cIiArIHBpY2t1cC5FeHRlbmRlZEluZm9baV0uRmllbGRJZCkudmFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBqUXVlcnkoXCIuc2hpcHRpbWl6ZS1waWNrdXBfX2Rlc2NyaXB0aW9uXCIpLmh0bWwoc2hpcHRpbWl6ZV9zZWxlY3RlZF9waWNrdXAgKyBcIiA6IFwiICsgcGlja3VwLkluZm9ybWF0aW9uLk5hbWUgKyBcIiBcIiArIHBpY2t1cC5JbmZvcm1hdGlvbi5BZGRyZXNzICsgXCIgXCIgKyBleHRyYSk7XG5cbiAgICAgICAgdGhpcy5wbGF0Zm9ybS5zZXRQaWNrdXBQb2ludChwaWNrdXApO1xuICAgICAgICB0aGlzLmhpZGVNYXAoKTtcbiAgICB9XG5cblxuICAgIC8qKiBcbiAgICAgKiAgUmV0dXJucyB0aGUgZGlzdGFuY2UgYmV0d2VlbiAyIChsYXQsbG5nKSBwb2ludHMgaW4ga21zIFxuICAgICAqL1xuICAgIGdldERpc3RhbmNlKGxhdGxuZywgbGF0bG5nMikge1xuXG4gICAgICAgIHZhciBSID0gNjM3MWUzOyAvLyBtZXRyZXNcbiAgICAgICAgdmFyIM+GMSA9IGxhdGxuZy5sYXQoKS50b1JhZGlhbnMoKTtcbiAgICAgICAgdmFyIM+GMiA9IGxhdGxuZzIubG5nKCkudG9SYWRpYW5zKCk7XG5cbiAgICAgICAgdmFyIM6Uz4YgPSAobGF0bG4yLmxhdCgpIC0gbGF0bG5nLmxuZygpKS50b1JhZGlhbnMoKTtcbiAgICAgICAgdmFyIM6UzrsgPSAobGF0bG4yLmxuZygpIC0gbGF0bG5nLmxvbigpKS50b1JhZGlhbnMoKTtcblxuICAgICAgICB2YXIgYSA9IE1hdGguc2luKM6Uz4YgLyAyKSAqIE1hdGguc2luKM6Uz4YgLyAyKSArXG4gICAgICAgICAgICBNYXRoLmNvcyjPhjEpICogTWF0aC5jb3Moz4YyKSAqXG4gICAgICAgICAgICBNYXRoLnNpbijOlM67IC8gMikgKiBNYXRoLnNpbijOlM67IC8gMik7XG4gICAgICAgIHZhciBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMSAtIGEpKTtcblxuICAgICAgICB2YXIgZCA9IE1hdGguZmxvb3IoUiAqIGMgLyAxMDAwKTtcbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogU2hvdyB0aGUgbWFwIGFuZCBxdWVyeSB0aGUgc2VydmVyIGZvciBwaWNrdXAgbG9jYXRpb25zIG5lYXIgdGhlIHNoaXBwaW5nIGFkZHJlc3MgcHJvdmlkZWQgYnkgdGhlIGNsaWVudFxuICAgICAqIGNlbnRlciB0aGUgbWFwIG9uIHRoZSBmaXJzdCBwb2ludCBcbiAgICAgKiByZW1vdmUgb2xkIG1hcmtlcnMgXG4gICAgICogYWRkIHRoZSBuZXcgbWFya2VycyAgXG4gICAgICovXG4gICAgZ2V0UGlja3VwTG9jYXRpb25zKCkge1xuICAgICAgICB0aGlzLnNob3dNYXAoKTtcblxuICAgICAgICBsZXQgZGF0YSA9IHRoaXMucGxhdGZvcm0uZ2V0U2hpcHBpbmdEYXRhKCk7XG4gICAgICAgIGRhdGEuYWN0aW9uID0gJ3NoaXB0aW1pemVfcGlja3VwX2xvY2F0aW9ucyc7XG5cbiAgICAgICAgdGhpcy5tYXAuc2V0Q2Fycmllckljb24oZGF0YS5DYXJyaWVySWQpO1xuXG4gICAgICAgIHRoaXMubWFwLmdlb2NvZGUoZGF0YSwgKGdlb2NvZGUpID0+IHsgdGhpcy5nZXRQaWNrdXBMb2NhdGlvbnNGcm9tR2VvY29kZWRBZGRyKGdlb2NvZGUsIGRhdGEpOyB9KTtcbiAgICB9XG5cblxuICAgIGdldFBpY2t1cExvY2F0aW9uc0Zyb21HZW9jb2RlZEFkZHIoZ2VvY29kZSwgZGF0YSkge1xuICAgICAgICB0aGlzLnJlc2V0VUkoKTsgXG4gICAgICAgIFxuICAgICAgICBkYXRhLkFkZHJlc3MuQ291bnRyeSA9IGdlb2NvZGUuaXNvMjtcbiAgICAgICAgZGF0YS5BZGRyZXNzLkxvbmcgPSBnZW9jb2RlLmxuZztcbiAgICAgICAgZGF0YS5BZGRyZXNzLkxhdCA9IGdlb2NvZGUubGF0O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZyhnZW9jb2RlKTtcblxuICAgICAgICBqUXVlcnkuZ2V0SlNPTih0aGlzLmFqYXhfdXJsLCBkYXRhLCAocGlja3VwUG9pbnRzKSA9PiB7XG4gICAgICAgICAgICBpZiAocGlja3VwUG9pbnRzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJubyBwaWNrdXAgcG9pbnRzIGZvdW5kIGZvciB0aGlzIGFkZHJlc3MgXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2cocGlja3VwUG9pbnRzKTtcbiAgICAgICAgICAgIGlmIChwaWNrdXBQb2ludHMuRXJyb3IuSWQgPT0gMCAmJiBwaWNrdXBQb2ludHMuUG9pbnQubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoXCIuc2hpcHRpbWl6ZS1waWNrdXBfX29wdGlvbnMsLnNoaXB0aW1pemUtcGlja3VwX19tYXBcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UGlja3VwTG9jYXRpb25zKHBpY2t1cFBvaW50cy5Qb2ludCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIGFwaSByZXR1cm5lZCBhbiBlcnJvciBcIiwgcGlja3VwUG9pbnRzLkVycm9yKTsgLy9waWNrdXBQb2ludHMuRXJyb3IuSW5mbyB8fCBcbiAgICAgICAgICAgICAgICB0aGlzLnBpY2t1cEVycm9yKHNoaXB0aW1pemVfbm9fcG9pbnRzX2ZvdW5kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXNldFVJKCl7XG4gICAgICAgIGpRdWVyeShcIi5zaGlwdGltaXplLXBpY2t1cF9fZXJyb3JcIikuaGlkZSgpO1xuICAgICAgICB0aGlzLm1hcC5jbGVhck1hcmtlcnMoKTsgXG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIEBwYXJhbSBzdHJpbmcgaW5mbyAtIHRoZSBtZXNzYWdlIHRvIGRpc3BsYXkgXG4gICAgICovXG4gICAgcGlja3VwRXJyb3IoaW5mbykge1xuICAgICAgICB0aGlzLnBpY2t1cFBvaW50cyA9IFtdOyBcblxuICAgICAgICBsZXQgZUVycm9yID0galF1ZXJ5KFwiLnNoaXB0aW1pemUtcGlja3VwX19lcnJvclwiKTtcbiAgICAgICAgZUVycm9yLmh0bWwoaW5mbyk7XG4gICAgICAgIGVFcnJvci5zaG93KCk7XG5cbiAgICAgICAgalF1ZXJ5KFwiLnNoaXB0aW1pemUtcGlja3VwX19vcHRpb25zLC5zaGlwdGltaXplLXBpY2t1cF9fbWFwXCIpLmhpZGUoKTtcbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogQXBwZW5kIHRoZSBwaWNrdXAgTG9jYXRpb25zIHRvIHRoZSBtYXBcbiAgICAgKiBAcGFyYW0gYXJyYXkgcGlja3VwUG9pbnRzIC0gYW4gYXJyYXkgb2YgYXZhaWxhYmxlIHBpY2t1cCBwb2ludHMgXG4gICAgICovXG4gICAgc2V0UGlja3VwTG9jYXRpb25zKHBpY2t1cFBvaW50cykge1xuICAgICAgICBqUXVlcnkoXCIuc2hpcHRpbWl6ZS1waWNrdXBfX2Vycm9yXCIpLmhpZGUoKTtcblxuICAgICAgICB0aGlzLnBpY2t1cFBvaW50cyA9IHBpY2t1cFBvaW50cztcbiAgICAgICAgdGhpcy5tYXAuY2xlYXJNYXJrZXJzKCk7XG4gICAgICAgIHRoaXMubWFwLmNlbnRlck1hcCh0aGlzLnBpY2t1cFBvaW50c1swXS5MYXQsIHRoaXMucGlja3VwUG9pbnRzWzFdLkxvbmcpO1xuICAgICAgICB0aGlzLm1hcC5hZGRNYXJrZXJzKHBpY2t1cFBvaW50cywgKGlkeCkgPT4geyB0aGlzLnNlbGVjdFBvaW50RnJvbUxpc3RJbk1hcChpZHgpOyB9KTtcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zRm9yQWRkcmVzcyhwaWNrdXBQb2ludHMpO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBAcGFyYW0gcGlja3VwUG9pbnRzW10gLSBbXSBvZiBwaWNrdXAgcG9pbnRzIHJldHVybmVkIGJ5IHRoZSBhcGkgXG4gICAgICovXG4gICAgc2V0T3B0aW9uc0ZvckFkZHJlc3MocGlja3VwUG9pbnRzKSB7XG5cbiAgICAgICAgbGV0IGh0bWwgPSAnJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwaWNrdXBQb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJzaGlwdGltaXplLXBpY2t1cF9fcG9pbnRcIj4nICtcbiAgICAgICAgICAgICAgICAnPGlucHV0IHR5cGU9XCJyYWRpb1wiIHZhbHVlPVwiJyArIGkgKyAnXCIgbmFtZT1cInNoaXB0aW1pemVfX3BvaW50XCIgIG9uY2xpY2s9XCJzaGlwdGltaXplLnNlbGVjdFBvaW50RnJvbUxpc3RJbk1hcCgnICsgaSArICcpXCIvPicgK1xuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInNoaXB0aW1pemUtcGlja3VwX19wb2ludF9kZXNjcmlwdGlvblwiIG9uY2xpY2s9XCJzaGlwdGltaXplLnNlbGVjdFBvaW50RnJvbUxpc3RJbk1hcCgnICsgaSArICcpXCI+JyArXG4gICAgICAgICAgICAgICAgJzxzcGFuPicgKyAocGlja3VwUG9pbnRzW2ldLkluZm9ybWF0aW9uLk5hbWUgPyBwaWNrdXBQb2ludHNbaV0uSW5mb3JtYXRpb24uTmFtZSArICc8YnIvPicgOiAnJylcbiAgICAgICAgICAgICAgICAgKyBwaWNrdXBQb2ludHNbaV0uSW5mb3JtYXRpb24uQWRkcmVzcyArICc8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRFeHRlbmRlZEluZm9IdG1sKHBpY2t1cFBvaW50c1tpXSkgK1xuICAgICAgICAgICAgICAgICc8L3NwYW4+J1xuXG4gICAgICAgICAgICAgICAgK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGh0bWwpO1xuXG4gICAgICAgIGpRdWVyeShcIi5zaGlwdGltaXplLXBpY2t1cF9fb3RoZXJcIikuaHRtbChodG1sKTtcbiAgICB9XG5cblxuICAgIGxvYWRNYXAoKSB7XG4gICAgICAgIHRoaXMubWFwLmxvYWRNYXAoKTtcbiAgICB9XG59XG5cbmlmKHR5cGVvZihqUXVlcnkpICE9ICd1bmRlZmluZWQnKXtcbiAgICBqUXVlcnkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5zaGlwdGltaXplID0gbmV3IFNoaXB0aW1pemUoc2hpcHRpbWl6ZV9hamF4X3BpY2t1cF9wb2ludHMpO1xuICAgIH0pO1xufSJdLCJuYW1lcyI6WyJTaGlwdGltaXplVXRpbHMiLCJjb25zdHJ1Y3RvciIsImluamVjdEV4dGVybmFsU2NyaXB0Iiwic3JjIiwicyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImluamVjdFNjcmlwdCIsImNvbnRlbnRzIiwiZSIsInZhbHVlIiwicmVtb3ZlTm9uTnVtZXJpYyIsInN0cmluZyIsInJlcGxhY2UiLCJpc1VybFZhbGlkIiwidXJsIiwiaHR0cCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJzdGF0dXMiLCJvcGVuTmV3V2luZG93Iiwib3B0aW9ucyIsIm5ld1dpbiIsIndpbmRvdyIsImJsb2NrZWQiLCJjbG9zZWQiLCJ1dGlscyIsIlNoaXB0bWl6ZU1hZ2VudG8iLCJib290c3RyYXAiLCJyYXRlX2NhcnJpZXIiLCJyYXRlX3JlcXVlc3RlZCIsInBpY2t1cFBvaW50IiwiY3VycmVudE1ldGhvZCIsImpRdWVyeSIsImxlbmd0aCIsInNldFRpbWVvdXQiLCJtYXBfd3JhcHBlciIsImFwcGVuZCIsImFkZEV2ZW50cyIsImFkZENoZWNrb3V0QnV0dG9uIiwib24iLCJlYWNoIiwiaWR4IiwiZWxlbSIsImNvbnNvbGUiLCJsb2ciLCJ2YWwiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJwYXJlbnQiLCJzaGlwcGluZ01ldGhvZCIsImdldFNlbGVjdGVkU2hpcHBwaW5nTWV0aG9kIiwiaGFzUGlja3VwIiwicmVtb3ZlIiwic2hpcHRpbWl6ZV9nZXRfc2hpcHBpbmdfYWRkcmVzcyIsImVTZWxlY3RlZE1ldGhvZCIsImdldCIsInBhcmVudFJvdyIsInBhcmVudHMiLCJlTGFiZWwiLCJzaWJsaW5ncyIsImVTaGlwdGltaXplQnV0dG9uIiwic2hpcHRtaXplX2Nob29zZSIsImluc2VydEFmdGVyIiwidGRzIiwiY2hpbGRyZW4iLCJhZGRDbGFzcyIsIm1hZ2VfaWQiLCJtYXRjaCIsIngiLCJzaGlwdGltaXplX2NhcnJpZXJzIiwiQ2xhc3NOYW1lIiwiSGFzUGlja3VwIiwiZ2V0U2hpcHRpbWl6ZUlkIiwiY2Fycmllcl9pZCIsIklkIiwibWV0aG9kIiwicGFydHMiLCJzcGxpdCIsImlzQ2hlY2tvdXQiLCJnZXRTaGlwcGluZ0RhdGEiLCJzaGlwdGltaXplX2FkZHJlc3MiLCJTdHJlZXRuYW1lMSIsIlN0cmVldG5hbWUyIiwiUG9zdGFsQ29kZSIsIkNpdHkiLCJDb3VudHJ5IiwiU3RhdGUiLCJzZXRQaWNrdXBQb2ludCIsInBpY2t1cCIsImxhYmVsIiwiSW5mb3JtYXRpb24iLCJOYW1lIiwiQWRkcmVzcyIsIlppcENvZGUiLCJlU2hpcFRvIiwiaHRtbCIsInNoaXB0aW1pemVfc2VsZWN0ZWRfcGlja3VwIiwiZGF0YSIsIlBvaW50SWQiLCJFeHRlbmRlZGluZm8iLCJnZXRKU09OIiwic2hpcHRpbWl6ZV9hamF4X3NhdmVfcGlja3VwIiwicmVzcCIsIlV0aWxzIiwiU2hpcHRpbWl6ZUdtYXBzIiwia2V5IiwiaXNTY3JpcHRMb2FkZWQiLCJtYXJrZXJzIiwibWFwIiwicGlja3VwUG9pbnRzIiwiaWNvbl9mb2xkZXIiLCJzaGlwdGltaXplX2ljb25fZm9sZGVyIiwiaWNvbl9zZWxlY3RlZCIsImljb25fZGVmYXVsdCIsImN1cnJlbnRfaWNvbiIsInNldENhcnJpZXJJY29uIiwiY2Fycmllcl9pY29uX3VybCIsImdyYW50UmVhZHkiLCJsb2FkU2NyaXB0IiwiZ29vZ2xlIiwibWFwcyIsImxvYWRNYXAiLCJ3aWR0aCIsImhlaWdodCIsIk1hcCIsImNlbnRlciIsImxhdCIsImxuZyIsInpvb20iLCJtYXBUeXBlQ29udHJvbCIsImNlbnRlck1hcCIsInNldENlbnRlciIsIkxhdExuZyIsImdldENvdW50cnlDb2RlRnJvbVJlc3VsdCIsImdlb2NvZGUiLCJhZGRyZXNzX2NvbXBvbmVudHMiLCJjb21wb25lbnRzIiwiaSIsInR5cGVzIiwiaiIsInNob3J0X25hbWUiLCJzaGlwcGluZ0RhdGEiLCJmX2NhbGxiYWNrIiwiZ2VvY29kZXIiLCJHZW9jb2RlciIsIm1lIiwiYWRkcmVzcyIsInBvc3RhbENvZGUiLCJyZXN1bHRzIiwiaXNvMiIsImxhdGxuZyIsImdlb21ldHJ5IiwibG9jYXRpb24iLCJjbGVhck1hcmtlcnMiLCJzZXRNYXAiLCJhZGRNYXJrZXJzIiwiY2FsbGJhY2siLCJnZXRNYXJrZXIiLCJtYXJrZXIiLCJhZGRMaXN0ZW5lciIsImZpdEJvdW5kcyIsIk1hcmtlciIsInBvc2l0aW9uIiwiTGF0IiwiTG9uZyIsImljb24iLCJib3VuZHMiLCJMYXRMbmdCb3VuZHMiLCJleHRlbmQiLCJnZXRQb3NpdGlvbiIsInNlbGVjdE1hcmtlckJ5SWR4Iiwic2V0SWNvbiIsIlNoaXB0aW1pemVPcGVuTWFwIiwiY3JlYXRlSWNvbiIsImltYWdlVXJsIiwiTCIsImljb25VcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsImludmFsaWRhdGVTaXplIiwibGF0TG5nIiwicmVzcG9uc2UiLCJjb3VudHJ5X2NvZGUiLCJsb24iLCJTSElQVElNSVpFX0xFQUZMRVRfVVJMIiwidGlsZUxheWVyIiwiYWRkVG8iLCJyZW1vdmVMYXllciIsInJlc2V0TWFya2VyIiwic2VsZWN0TWFya2VyIiwiYm90dG9tTGVmdCIsInRvcFJpZ2h0IiwiY2VudGVyWCIsImNlbnRlclkiLCJwYW5UbyIsIk1hZ2VudG8iLCJHb29nbGVNYXAiLCJPcGVuU3RyZWV0TWFwIiwiU2hpcHRpbWl6ZSIsImFqYXhfdXJsIiwiaXNNYXBMb2FkZWQiLCJnbWFwc19rZXkiLCJzaGlwdGltaXplX21hcHNfa2V5Iiwib3Blbk1hcE1hcmtlckljb25zIiwicGxhdGZvcm0iLCJzaG93TWFwIiwidXNlclNjcm9sbCIsInNjcm9sbFRvcCIsImhpZGVNYXAiLCJyZW1vdmVDbGFzcyIsImhpZGUiLCJnZXRFeHRlbmRlZEluZm9IdG1sIiwiRXh0ZW5kZWRJbmZvIiwiZXh0cmFJbmZvIiwiVGVrc3QiLCJGaWVsZElkIiwic2VsZWN0UG9pbnRGcm9tTGlzdEluTWFwIiwicHJvcCIsInNlbGVjdEZyb21MaXN0IiwiZXh0cmEiLCJnZXREaXN0YW5jZSIsImxhdGxuZzIiLCJSIiwiz4YxIiwidG9SYWRpYW5zIiwiz4YyIiwizpTPhiIsImxhdGxuMiIsIs6UzrsiLCJhIiwiTWF0aCIsInNpbiIsImNvcyIsImMiLCJhdGFuMiIsInNxcnQiLCJkIiwiZmxvb3IiLCJnZXRQaWNrdXBMb2NhdGlvbnMiLCJhY3Rpb24iLCJDYXJyaWVySWQiLCJnZXRQaWNrdXBMb2NhdGlvbnNGcm9tR2VvY29kZWRBZGRyIiwicmVzZXRVSSIsIkVycm9yIiwiUG9pbnQiLCJzaG93Iiwic2V0UGlja3VwTG9jYXRpb25zIiwicGlja3VwRXJyb3IiLCJzaGlwdGltaXplX25vX3BvaW50c19mb3VuZCIsImluZm8iLCJlRXJyb3IiLCJzZXRPcHRpb25zRm9yQWRkcmVzcyIsInNoaXB0aW1pemUiLCJzaGlwdGltaXplX2FqYXhfcGlja3VwX3BvaW50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///450\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__[450]();
/******/ 	
/******/ })()
;